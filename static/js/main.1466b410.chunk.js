(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),s=(a(16),a(17),a(2));var o=e=>{let{currentMaqam:t,setCurrentMaqam:a,tMaqamsIntervals:n,rootNoteOffset:l,setRootNoteOffset:c,oscillatorType:s,setOscillatorType:o,attack:u,setAttack:i,decay:m,setDecay:d,sustain:p,setSustain:v,release:h,setRelease:g,delayAmount:E,setDelayAmount:b,delayFeedback:y,setDelayFeedback:f,reverbAmount:k,setReverbAmount:w}=e;return r.a.createElement("div",{className:"synth-controls-container"},r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"maqam-select"},"Select Maqam:"),r.a.createElement("select",{id:"maqam-select",value:t,onChange:e=>a(e.target.value)},Object.keys(n).map(e=>r.a.createElement("option",{key:e,value:e},e)))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"root-offset-slider"},"Root Octave Offset:"),r.a.createElement("input",{id:"root-offset-slider",type:"range",min:"-2",max:"2",step:"1",value:l,onChange:e=>c(parseInt(e.target.value))}),r.a.createElement("span",null,l)),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",null,"Oscillator Type:"),r.a.createElement("div",{className:"radio-group"},r.a.createElement("input",{type:"radio",id:"sine",name:"oscType",value:"sine",checked:"sine"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"sine"},"Sine"),r.a.createElement("input",{type:"radio",id:"sawtooth",name:"oscType",value:"sawtooth",checked:"sawtooth"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"sawtooth"},"Sawtooth"),r.a.createElement("input",{type:"radio",id:"triangle",name:"oscType",value:"triangle",checked:"triangle"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"triangle"},"Triangle"),r.a.createElement("input",{type:"radio",id:"square",name:"oscType",value:"square",checked:"square"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"square"},"Square"))),r.a.createElement("div",{className:"control-group adsr-controls"},r.a.createElement("h3",null,"Envelope (ADSR)"),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"attack-slider"},"Attack:"),r.a.createElement("input",{type:"range",id:"attack-slider",min:"0.001",max:"2",step:"0.001",value:u,onChange:e=>i(parseFloat(e.target.value))}),r.a.createElement("span",null,u.toFixed(3),"s")),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"decay-slider"},"Decay:"),r.a.createElement("input",{type:"range",id:"decay-slider",min:"0.01",max:"2",step:"0.01",value:m,onChange:e=>d(parseFloat(e.target.value))}),r.a.createElement("span",null,m.toFixed(2),"s")),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"sustain-slider"},"Sustain:"),r.a.createElement("input",{type:"range",id:"sustain-slider",min:"0",max:"1",step:"0.01",value:p,onChange:e=>v(parseFloat(e.target.value))}),r.a.createElement("span",null,p.toFixed(2))),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"release-slider"},"Release:"),r.a.createElement("input",{type:"range",id:"release-slider",min:"0.01",max:"3",step:"0.01",value:h,onChange:e=>g(parseFloat(e.target.value))}),r.a.createElement("span",null,h.toFixed(2),"s"))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"delay-slider"},"Delay (Wet Mix):"),r.a.createElement("input",{id:"delay-slider",type:"range",min:"0",max:"1",step:"0.01",value:E,onChange:e=>b(parseFloat(e.target.value))}),r.a.createElement("span",null,E.toFixed(2))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"delay-feedback-slider"},"Delay Feedback:"),r.a.createElement("input",{id:"delay-feedback-slider",type:"range",min:"0",max:"0.95",step:"0.01",value:y,onChange:e=>f(parseFloat(e.target.value))}),r.a.createElement("span",null,y.toFixed(2))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"reverb-slider"},"Reverb (Wet Mix):"),r.a.createElement("input",{id:"reverb-slider",type:"range",min:"0",max:"1",step:"0.01",value:k,onChange:e=>w(parseFloat(e.target.value))}),r.a.createElement("span",null,k.toFixed(2))))};const u=e=>{let{mappings:t=[],activeFreqs:a=new Set}=e;return r.a.createElement("div",{className:"note-grid"},t.filter(e=>e&&e.freq).map((e,t)=>{let{freq:n,name:l,key:c}=e;const s=a.has(n);return r.a.createElement("span",{key:t,className:"note-button ".concat(s?"active":"")},l," ",c?"(".concat(c,")"):"")}))};var i=e=>{let{upMappings:t=[],baseMappings:a=[],downMappings:n=[],activeFreqs:l=new Set}=e;return r.a.createElement("div",{className:"note-display-section"},r.a.createElement("h2",null,"Maqam Notes:"),r.a.createElement(u,{mappings:t,activeFreqs:l}),r.a.createElement(u,{mappings:a,activeFreqs:l}),r.a.createElement(u,{mappings:n,activeFreqs:l}))};a(28);const m={Rast:[9,8,5,9,9,4,4,5],Nahawand:[9,4,9,9,4,9,9],HicazUzzalHumayun:[5,12,5,9,4,4,5,9],Hicazkar:[5,12,5,9,5,3,5,4,5],Yegah:[9,8,5,9,8,4,4,5],SultaniyegahRuhnevaz:[9,4,9,9,4,9,4,5],FerahnumaAskefza:[4,9,9,9,4,9,9],Sedaraban:[5,12,5,9,5,8,4,5],Huseyniasiran:[8,5,9,8,5,9,9],Suzidil:[5,1,5,4,4,5,4,5],Acemasiran:[9,9,4,4,5,9,9,4],Sevkefza:[9,5,4,4,4,5,5,13,4],Iraq:[5,9,8,5,9,9,4,4],EvicSegah:[5,9,8,5,4,5,9,4,4],Ferahnak:[5,9,8,1,4,4,5,9,4,4],Evicara:[5,13,4,9,5,13,4],Mahur:[9,9,4,9,9,4,5,4],Suzidilara:[9,5,4,4,4,5,9,4,5,4],Buzurk:[9,9,4,4,5,9,4,4,5],Suzinak:[5,4,4,4,5,9,4,9,9],ZirguleliSuzinak:[5,12,5,5,4,4,4,5,9],Kurdilihicazkar:[4,1,4,4,4,5,9,4,4,5],Nihavend:[9,4,9,5,4,4,5,8,5],Neveser:[9,5,12,5,5,12,5],Nikriz:[9,5,12,5,9,4,4,5],HuseyniMuhayyer:[8,5,9,9,4,4,5,9],GulizarBeyati:[8,5,9,5,4,4,4,5,9],UssakAcem:[8,5,9,9,4,9,9],Kurdi:[4,4,1,4,9,4,5,4,9,9],Buselik:[9,4,9,5,4,4,4,5,4,5],Arazbar:[8,5,9,5,3,1,4,4,5,9],Zirgule:[5,12,5,9,4,1,8,4,5],Sehnaz:[5,12,5,9,4,1,3,5,4,5],SabaSunbule:[8,5,5,13,4,9,9],Kucek:[8,5,5,13,4,4,5,5,4],EskiSipihr:[8,5,5,1,3,9,4,4,5,4,5],Dugah:[4,4,5,4,1,13,4,9,9],Hisar:[8,5,9,4,5,4,1,8,4,5],YeniSipihr:[5,3,5,4,5,4,5,4,1,3,5,4,5],Nisaburek:[9,8,5,9,5,8,9],Huzzam:[5,9,5,12,5,9,4,4],Mustear:[9,5,8,9,5,9,4,4],MayeYeniMaye:[5,9,8,1,4,9,9,8],VechiArazbar:[1,4,9,8,5,9,9,3,5],Nisabur:[8,5,9,4,9,9,4,5],CargahI:[5,13,4,9,5,12,5],CargahII:[9,9,4,9,9,9,4],Araban:[5,8,13,5,5,8,4,5],Urmawi:[9,8,5,9,9,5,8]},d=e=>{const t=12*Math.log2(e/440)+69,a=Math.round(t),n=Math.round(100*(t-a));let r=["Do","Do\u266f","Re","Re\u266f","Mi","Fa","Fa\u266f","Sol","Sol\u266f","La","La\u266f","Si"][a%12];const l=Math.floor(a/12)-1;return Math.abs(n)>10&&Math.abs(n)<90&&(r+=n>0?"\u2191":"\u2193"),"".concat(r).concat(l)};var p=()=>{var e;const t=Object(n.useRef)(null),a=Object(n.useRef)(null),l=Object(n.useRef)(null),c=Object(n.useRef)(null),u=Object(n.useRef)(null),[p,v]=Object(n.useState)("sine"),[h,g]=Object(n.useState)(.01),[E,b]=Object(n.useState)(.2),[y,f]=Object(n.useState)(.5),[k,w]=Object(n.useState)(1),[S,M]=Object(n.useState)(0),[F,O]=Object(n.useState)(.5),[q,j]=Object(n.useState)(0),[N,x]=Object(n.useState)("Rast"),[C,R]=Object(n.useState)([]),[z,A]=Object(n.useState)(0),D=((null===(e=m[N])||void 0===e?void 0:e.length)||0)+1,[L,T]=Object(n.useState)(new Set),[I,H]=Object(n.useState)(new Set),B=["q","w","e","r","t","y","u","\u0131","o","p","\u011f","\xfc"],K=["a","s","d","f","g","h","j","k","l","\u015f","i",","],U=["z","x","c","v","b","n","m","\xf6","\xe7","."],Y=r.a.useMemo(()=>K.slice(0,D),[D]),J=r.a.useMemo(()=>U.slice(0,Math.min(D,U.length)),[D]),W=r.a.useMemo(()=>B.slice(0,Math.min(D,B.length)),[D]),Z=r.a.useCallback((e,t)=>e.map((e,a)=>{const n=t*D+a,r=C[n];return{key:e,freq:r,name:r?d(r):"",index:n}}),[C,D]),G=r.a.useMemo(()=>Z(W,2),[W,Z]),V=r.a.useMemo(()=>Z(Y,1),[Y,Z]),P=r.a.useMemo(()=>Z(J,0),[J,Z]),Q=Object(n.useRef)(new Map),X=Object(n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:110;const a=m[e];if(!a)return console.warn('Maqam "'.concat(e,'" not found in intervals dictionary.')),[];const n=[t];let r=t;for(let c=0;c<a.length;c++)r*=Math.pow(2,a[c]/53),n.push(r);const l=[];for(let c=-1;c<=2;c++)n.forEach(e=>{l.push(e*Math.pow(2,c))});return l.sort((e,t)=>e-t),l},[]);Object(n.useEffect)(()=>{if(!t.current){a.current=new s.c(.5),l.current=new s.b("8n",F).set({wet:0}),c.current=new s.f({decay:1.5,wet:.05}).set({wet:0}),u.current=new s.d(-6),t.current=new s.e(s.g,{oscillator:{type:p},envelope:{attack:h,decay:E,sustain:y,release:k}}).chain(l.current,c.current,u.current,a.current,s.a);const e=()=>{"running"!==s.h.state&&(s.i(),console.log("Audio context started.")),document.removeEventListener("keydown",e),document.removeEventListener("click",e)};document.addEventListener("keydown",e),document.addEventListener("click",e)}},[]),Object(n.useEffect)(()=>{const e=110*Math.pow(2,z),t=X(N,e);R(t),console.log("Maqam: ".concat(N,", Root Freq: ").concat(e,", Notes:"),t.map(e=>e.toFixed(2)))},[N,z,X]),Object(n.useEffect)(()=>{t.current&&t.current.set({oscillator:{type:p},envelope:{attack:h,decay:E,sustain:y,release:k}})},[p,h,E,y,k]),Object(n.useEffect)(()=>{l.current&&(l.current.wet.value=S,l.current.feedback.value=F)},[S,F]),Object(n.useEffect)(()=>{c.current&&(c.current.wet.value=q)},[q]);const $=Object(n.useCallback)((e,a)=>{t.current&&!Q.current.has(a)&&(t.current.triggerAttack(e),Q.current.set(a,e),T(e=>{const t=new Set(e);return t.add(a),t}),H(t=>{const a=new Set(t);return a.add(e),a}))},[]),_=Object(n.useCallback)(e=>{if(t.current&&Q.current.has(e)){const a=Q.current.get(e);t.current.triggerRelease(a),Q.current.delete(e),T(t=>{const a=new Set(t);return a.delete(e),a}),H(e=>{const t=new Set(e);return t.delete(a),t})}},[]);return Object(n.useEffect)(()=>{const e=Y,t=J,a=W,n=n=>{const r=n.key.toLowerCase();if(![...e,...t,...a].includes(r))return;n.preventDefault();let l=-1,c=-1;if(e.includes(r)?(l=e.indexOf(r),c=1):t.includes(r)?(l=t.indexOf(r),c=0):a.includes(r)&&(l=a.indexOf(r),c=2),-1!==l&&C.length>0){const e=c*D+l;e>=0&&e<C.length?$(C[e],r):console.warn('Key "'.concat(r,'" maps to an out-of-bounds note index: ').concat(e,". Maqam notes length: ").concat(C.length,". Current Maqam Scale Length: ").concat(D))}},r=e=>{const t=e.key.toLowerCase();[...Y,...J,...W].includes(t)&&(e.preventDefault(),_(t))};return window.addEventListener("keydown",n),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",r),Q.current.clear(),T(new Set),H(new Set)}},[C,N,$,_,D,Y,J,W]),r.a.createElement("div",{className:"maqam-synth-container"},r.a.createElement("h1",null,"Turkish Maqam Synthesizer"),r.a.createElement(o,{currentMaqam:N,setCurrentMaqam:x,tMaqamsIntervals:m,rootNoteOffset:z,setRootNoteOffset:A,oscillatorType:p,setOscillatorType:v,attack:h,setAttack:g,decay:E,setDecay:b,sustain:y,setSustain:f,release:k,setRelease:w,delayAmount:S,setDelayAmount:M,delayFeedback:F,setDelayFeedback:O,reverbAmount:q,setReverbAmount:j}),r.a.createElement(i,{upMappings:G,baseMappings:V,downMappings:P,activeFreqs:I}))};var v=function(){return r.a.createElement("div",null,r.a.createElement(p,null)," ")};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)))},7:function(e,t,a){e.exports=a(29)}},[[7,1,2]]]);
//# sourceMappingURL=main.1466b410.chunk.js.map