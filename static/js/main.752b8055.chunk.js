(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){},18:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(6),c=a.n(r),o=(a(17),a(18),a(1)),s=a(7),u=a.n(s);var i=e=>{let{value:t,min:a,max:r,step:c=0,onChange:o,size:s=[60,60]}=e;const i=Object(n.useRef)(null),m=Object(n.useRef)(null);return Object(n.useEffect)(()=>{if(i.current){i.current.innerHTML="";const e=new u.a.Dial(i.current,{size:s,interaction:"vertical",mode:"relative",min:a,max:r,step:c,value:t}),n="#FFB7B2",l="#E0F2F1",d="#4A4063";return e.colorize("accent",n),e.colorize("fill",l),e.colorize("medium",d),e.on("change",e=>{o(e)}),m.current=e,()=>{m.current&&m.current.destroy()}}},[]),Object(n.useEffect)(()=>{m.current&&m.current.value!==t&&Math.abs(m.current.value-t)>(c||.001)&&(m.current.value=t)},[t,c]),l.a.createElement("div",{ref:i,style:{display:"inline-block"}})};const m=[45,45],d=e=>{let{options:t,value:a,onChange:n,name:r}=e;return l.a.createElement("div",{className:"segmented-control"},t.map(e=>l.a.createElement("label",{key:e.value,className:"segment ".concat(a===e.value?"active":"")},l.a.createElement("input",{type:"radio",name:r,value:e.value,checked:a===e.value,onChange:e=>n(e.target.value)}),l.a.createElement("span",null,e.label))))},v=e=>{let{value:t,onChange:a}=e;return l.a.createElement("div",{className:"segmented-control octave-control"},[{label:"-2",value:-2},{label:"-1",value:-1},{label:"0",value:0},{label:"+1",value:1},{label:"+2",value:2}].map(e=>l.a.createElement("label",{key:e.value,className:"segment ".concat(t===e.value?"active":"")},l.a.createElement("input",{type:"radio",name:"octave",value:e.value,checked:t===e.value,onChange:e=>a(parseInt(e.target.value))}),l.a.createElement("span",null,e.label))))};var p=e=>{let{rootNoteOffset:t,setRootNoteOffset:a,oscillatorType:n,setOscillatorType:r,attack:c,setAttack:o,decay:s,setDecay:u,sustain:p,setSustain:E,release:b,setRelease:h,modOscillatorType:f,setModOscillatorType:g,modAttack:y,setModAttack:w,modDecay:N,setModDecay:M,modSustain:O,setModSustain:k,modRelease:S,setModRelease:j,modulationIndex:C,setModulationIndex:z,harmonicity:R,setHarmonicity:x,delayAmount:D,setDelayAmount:q,delayFeedback:A,setDelayFeedback:F,reverbAmount:L,setReverbAmount:T,filterCutoff:I,setFilterCutoff:H,filterResonance:U,setFilterResonance:B,distortionAmount:K,setDistortionAmount:Y,chorusDepth:J,setChorusDepth:W}=e;const Z=[{label:"Sin",value:"sine"},{label:"Saw",value:"sawtooth"},{label:"Tri",value:"triangle"},{label:"Sqr",value:"square"}];return l.a.createElement("div",{className:"synth-controls-container"},l.a.createElement("div",{className:"controls-row top-row"},l.a.createElement("div",{className:"control-group offset-group"},l.a.createElement("label",null,"Root Octave"),l.a.createElement(v,{value:t,onChange:a})),l.a.createElement("div",{className:"control-group osc-type-group"},l.a.createElement("label",null,"Osc 1 Wave"),l.a.createElement(d,{options:Z,value:n,onChange:r,name:"oscType"})),l.a.createElement("div",{className:"control-group osc-type-group"},l.a.createElement("label",null,"Osc 2 (Mod) Wave"),l.a.createElement(d,{options:Z,value:f,onChange:g,name:"modOscType"})),l.a.createElement("div",{className:"control-group mod-params-group compact-group"},l.a.createElement("label",null,"FM Params"),l.a.createElement("div",{className:"adsr-row"},l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"Index"),l.a.createElement(i,{size:m,min:0,max:100,step:1,value:C,onChange:z})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"Harmonic"),l.a.createElement(i,{size:m,min:.1,max:10,step:.1,value:R,onChange:x})))),l.a.createElement("div",{className:"control-group fx-controls compact-group"},l.a.createElement("label",null,"Effects Rack"),l.a.createElement("div",{className:"adsr-row"},l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"Cutoff"),l.a.createElement(i,{size:m,min:20,max:5e3,step:10,value:I,onChange:H})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"Res"),l.a.createElement(i,{size:m,min:0,max:20,step:.1,value:U,onChange:B})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"Dist"),l.a.createElement(i,{size:m,min:0,max:1,step:.01,value:K,onChange:Y})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"Chorus"),l.a.createElement(i,{size:m,min:0,max:1,step:.01,value:J,onChange:W})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"D.Mix"),l.a.createElement(i,{size:m,min:0,max:1,step:.01,value:D,onChange:q})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"D.Fdbk"),l.a.createElement(i,{size:m,min:0,max:.95,step:.01,value:A,onChange:F})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"Reverb"),l.a.createElement(i,{size:m,min:0,max:1,step:.01,value:L,onChange:T}))))),l.a.createElement("div",{className:"controls-row bottom-row"},l.a.createElement("div",{className:"control-group adsr-controls"},l.a.createElement("h3",null,"Osc 1 Envelope"),l.a.createElement("div",{className:"adsr-row"},l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"A"),l.a.createElement(i,{size:m,min:.001,max:2,step:.001,value:c,onChange:o})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"D"),l.a.createElement(i,{size:m,min:.01,max:2,step:.01,value:s,onChange:u})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"S"),l.a.createElement(i,{size:m,min:0,max:1,step:.01,value:p,onChange:E})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"R"),l.a.createElement(i,{size:m,min:.01,max:3,step:.01,value:b,onChange:h})))),l.a.createElement("div",{className:"control-group adsr-controls"},l.a.createElement("h3",null,"Osc 2 (Mod) Envelope"),l.a.createElement("div",{className:"adsr-row"},l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"A"),l.a.createElement(i,{size:m,min:.001,max:2,step:.001,value:y,onChange:w})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"D"),l.a.createElement(i,{size:m,min:.01,max:2,step:.01,value:N,onChange:M})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"S"),l.a.createElement(i,{size:m,min:0,max:1,step:.01,value:O,onChange:k})),l.a.createElement("div",{className:"control-item dial-item"},l.a.createElement("label",null,"R"),l.a.createElement(i,{size:m,min:.01,max:3,step:.01,value:S,onChange:j}))))))};const E=e=>{let{mappings:t=[],activeFreqs:a=new Set,onNoteDown:n=(()=>{}),onNoteUp:r=(()=>{})}=e;return l.a.createElement("div",{className:"note-grid"},t.filter(e=>e&&e.freq).map((e,t)=>{let{freq:c,name:o,key:s}=e;const u=a.has(c);return l.a.createElement("span",{key:t,className:"note-button ".concat(u?"active":""),onMouseDown:e=>{e.preventDefault(),n(c,s)},onMouseUp:e=>{e.preventDefault(),r(s)},onTouchStart:e=>{n(c,s)},onTouchEnd:e=>{r(s)}},o," ",s?"(".concat(s,")"):"")}))};var b=e=>{let{upMappings:t=[],baseMappings:a=[],downMappings:n=[],activeFreqs:r=new Set,onNoteDown:c=(()=>{}),onNoteUp:o=(()=>{}),currentMaqam:s,setCurrentMaqam:u,tMaqamsIntervals:i}=e;return l.a.createElement("div",{className:"note-display-section"},l.a.createElement("div",{className:"note-header"},l.a.createElement("h2",null,"Maqam Notes"),i&&l.a.createElement("div",{className:"maqam-selector"},l.a.createElement("label",{htmlFor:"maqam-select-note"},"Select Maqam:"),l.a.createElement("select",{id:"maqam-select-note",value:s,onChange:e=>u(e.target.value)},Object.keys(i).map(e=>l.a.createElement("option",{key:e,value:e},e))))),l.a.createElement("div",{className:"rows-container"},l.a.createElement(E,{mappings:t,activeFreqs:r,onNoteDown:c,onNoteUp:o}),l.a.createElement(E,{mappings:a,activeFreqs:r,onNoteDown:c,onNoteUp:o}),l.a.createElement(E,{mappings:n,activeFreqs:r,onNoteDown:c,onNoteUp:o})))};a(29);const h=["q","w","e","r","t","y","u","\u0131","o","p","\u011f","\xfc"],f=["a","s","d","f","g","h","j","k","l","\u015f","i",","],g=["z","x","c","v","b","n","m","\xf6","\xe7","."],y={Rast:[9,8,5,9,9,4,4,5],Nahawand:[9,4,9,9,4,9,9],HicazUzzalHumayun:[5,12,5,9,4,4,5,9],Hicazkar:[5,12,5,9,5,3,5,4,5],Yegah:[9,8,5,9,8,4,4,5],SultaniyegahRuhnevaz:[9,4,9,9,4,9,4,5],FerahnumaAskefza:[4,9,9,9,4,9,9],Sedaraban:[5,12,5,9,5,8,4,5],Huseyniasiran:[8,5,9,8,5,9,9],Suzidil:[5,1,5,4,4,5,4,5],Acemasiran:[9,9,4,4,5,9,9,4],Sevkefza:[9,5,4,4,4,5,5,13,4],Iraq:[5,9,8,5,9,9,4,4],EvicSegah:[5,9,8,5,4,5,9,4,4],Ferahnak:[5,9,8,1,4,4,5,9,4,4],Evicara:[5,13,4,9,5,13,4],Mahur:[9,9,4,9,9,4,5,4],Suzidilara:[9,5,4,4,4,5,9,4,5,4],Buzurk:[9,9,4,4,5,9,4,4,5],Suzinak:[5,4,4,4,5,9,4,9,9],ZirguleliSuzinak:[5,12,5,5,4,4,4,5,9],Kurdilihicazkar:[4,1,4,4,4,5,9,4,4,5],Nihavend:[9,4,9,5,4,4,5,8,5],Neveser:[9,5,12,5,5,12,5],Nikriz:[9,5,12,5,9,4,4,5],HuseyniMuhayyer:[8,5,9,9,4,4,5,9],GulizarBeyati:[8,5,9,5,4,4,4,5,9],UssakAcem:[8,5,9,9,4,9,9],Kurdi:[4,4,1,4,9,4,5,4,9,9],Buselik:[9,4,9,5,4,4,4,5,4,5],Arazbar:[8,5,9,5,3,1,4,4,5,9],Zirgule:[5,12,5,9,4,1,8,4,5],Sehnaz:[5,12,5,9,4,1,3,5,4,5],SabaSunbule:[8,5,5,13,4,9,9],Kucek:[8,5,5,13,4,4,5,5,4],EskiSipihr:[8,5,5,1,3,9,4,4,5,4,5],Dugah:[4,4,5,4,1,13,4,9,9],Hisar:[8,5,9,4,5,4,1,8,4,5],YeniSipihr:[5,3,5,4,5,4,5,4,1,3,5,4,5],Nisaburek:[9,8,5,9,5,8,9],Huzzam:[5,9,5,12,5,9,4,4],Mustear:[9,5,8,9,5,9,4,4],MayeYeniMaye:[5,9,8,1,4,9,9,8],VechiArazbar:[1,4,9,8,5,9,9,3,5],Nisabur:[8,5,9,4,9,9,4,5],CargahI:[5,13,4,9,5,12,5],CargahII:[9,9,4,9,9,9,4],Araban:[5,8,13,5,5,8,4,5],Urmawi:[9,8,5,9,9,5,8]},w=e=>{const t=12*Math.log2(e/440)+69,a=Math.round(t),n=Math.round(100*(t-a));let l=["Do","Do\u266f","Re","Re\u266f","Mi","Fa","Fa\u266f","Sol","Sol\u266f","La","La\u266f","Si"][a%12];const r=Math.floor(a/12)-1;return Math.abs(n)>10&&Math.abs(n)<90&&(l+=n>0?"\u2191":"\u2193"),"".concat(l).concat(r)};var N=()=>{var e;const t=Object(n.useRef)(null),a=Object(n.useRef)(null),r=Object(n.useRef)(null),c=Object(n.useRef)(null),s=Object(n.useRef)(null),u=Object(n.useRef)(null),i=Object(n.useRef)(null),m=Object(n.useRef)(null),[d,v]=Object(n.useState)("sine"),[E,N]=Object(n.useState)(.01),[M,O]=Object(n.useState)(.2),[k,S]=Object(n.useState)(.5),[j,C]=Object(n.useState)(1),[z,R]=Object(n.useState)("sine"),[x,D]=Object(n.useState)(.01),[q,A]=Object(n.useState)(.2),[F,L]=Object(n.useState)(.5),[T,I]=Object(n.useState)(1),[H,U]=Object(n.useState)(10),[B,K]=Object(n.useState)(1),[Y,J]=Object(n.useState)(0),[W,Z]=Object(n.useState)(.5),[G,P]=Object(n.useState)(0),[Q,V]=Object(n.useState)(2e3),[X,$]=Object(n.useState)(1),[_,ee]=Object(n.useState)(0),[te,ae]=Object(n.useState)(0),[ne,le]=Object(n.useState)("Rast"),[re,ce]=Object(n.useState)([]),[oe,se]=Object(n.useState)(0),ue=((null===(e=y[ne])||void 0===e?void 0:e.length)||0)+1,[ie,me]=Object(n.useState)(new Set),de=l.a.useMemo(()=>f.slice(0,ue),[ue]),ve=l.a.useMemo(()=>g.slice(0,Math.min(ue,g.length)),[ue]),pe=l.a.useMemo(()=>h.slice(0,Math.min(ue,h.length)),[ue]),Ee=l.a.useCallback((e,t)=>e.map((e,a)=>{const n=t*ue+a,l=re[n];return{key:e,freq:l,name:l?w(l):"",index:n}}),[re,ue]),be=l.a.useMemo(()=>Ee(pe,2),[pe,Ee]),he=l.a.useMemo(()=>Ee(de,1),[de,Ee]),fe=l.a.useMemo(()=>Ee(ve,0),[ve,Ee]),ge=Object(n.useRef)(new Map),ye=Object(n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:110;const a=y[e];if(!a)return console.warn('Maqam "'.concat(e,'" not found in intervals dictionary.')),[];const n=[t];let l=t;for(let c=0;c<a.length;c++)l*=Math.pow(2,a[c]/53),n.push(l);const r=[];for(let c=-1;c<=2;c++)n.forEach(e=>{r.push(e*Math.pow(2,c))});return r.sort((e,t)=>e-t),r},[]);Object(n.useEffect)(()=>{if(!t.current){a.current=new o.g(.5),r.current=new o.e("8n",W).set({wet:0}),c.current=new o.j({decay:1.5,wet:.05}).set({wet:0}),s.current=new o.f(2e3,"lowpass"),u.current=new o.c(0).set({wet:0}),i.current=new o.a(4,2.5,.5).set({wet:0}),m.current=new o.h(-6),t.current=new o.i(o.d,{oscillator:{type:d},envelope:{attack:E,decay:M,sustain:k,release:j},modulation:{type:z},modulationEnvelope:{attack:x,decay:q,sustain:F,release:T},modulationIndex:H,harmonicity:B}).chain(u.current,s.current,i.current,r.current,c.current,m.current,a.current,o.b);const e=()=>{"running"!==o.k.state&&(o.l(),console.log("Audio context started.")),document.removeEventListener("keydown",e),document.removeEventListener("click",e),document.removeEventListener("touchstart",e)};document.addEventListener("keydown",e),document.addEventListener("click",e),document.addEventListener("touchstart",e,{passive:!0})}},[]),Object(n.useEffect)(()=>{const e=110*Math.pow(2,oe),t=ye(ne,e);ce(t),console.log("Maqam: ".concat(ne,", Root Freq: ").concat(e,", Notes:"),t.map(e=>e.toFixed(2)))},[ne,oe,ye]),Object(n.useEffect)(()=>{t.current&&t.current.set({oscillator:{type:d},envelope:{attack:E,decay:M,sustain:k,release:j},modulation:{type:z},modulationEnvelope:{attack:x,decay:q,sustain:F,release:T},modulationIndex:H,harmonicity:B})},[d,E,M,k,j,z,x,q,F,T,H,B]),Object(n.useEffect)(()=>{r.current&&(r.current.delayTime.value="8n",r.current.feedback.value=W,r.current.wet.value=Y),c.current&&(c.current.wet.value=G),s.current&&(s.current.frequency.value=Q,s.current.Q.value=X),u.current&&(u.current.distortion=_,u.current.wet.value=_>0?1:0),i.current&&(i.current.depth=te,i.current.wet.value=te>0?.5:0)},[Y,W,G,Q,X,_,te]);const we=Object(n.useCallback)((e,a)=>{t.current&&!ge.current.has(a)&&(t.current.triggerAttack(e),ge.current.set(a,e),me(t=>{const a=new Set(t);return a.add(e),a}))},[]),Ne=Object(n.useCallback)(e=>{if(t.current&&ge.current.has(e)){const a=ge.current.get(e);t.current.triggerRelease(a),ge.current.delete(e),me(e=>{const t=new Set(e);return t.delete(a),t})}},[]);return Object(n.useEffect)(()=>{const e=de,t=ve,a=pe,n=n=>{const l=n.key.toLowerCase();if(![...e,...t,...a].includes(l))return;n.preventDefault();let r=-1,c=-1;if(e.includes(l)?(r=e.indexOf(l),c=1):t.includes(l)?(r=t.indexOf(l),c=0):a.includes(l)&&(r=a.indexOf(l),c=2),-1!==r&&re.length>0){const e=c*ue+r;e>=0&&e<re.length?we(re[e],l):console.warn('Key "'.concat(l,'" maps to an out-of-bounds note index: ').concat(e,". Maqam notes length: ").concat(re.length,". Current Maqam Scale Length: ").concat(ue))}},l=e=>{const t=e.key.toLowerCase();[...de,...ve,...pe].includes(t)&&(e.preventDefault(),Ne(t))};return window.addEventListener("keydown",n),window.addEventListener("keyup",l),()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",l),ge.current.clear(),me(new Set)}},[re,ne,we,Ne,ue,de,ve,pe]),l.a.createElement("div",{className:"maqam-synth-container"},l.a.createElement("h1",null,"Turkish Maqam Synthesizer"),l.a.createElement(p,{rootNoteOffset:oe,setRootNoteOffset:se,oscillatorType:d,setOscillatorType:v,attack:E,setAttack:N,decay:M,setDecay:O,sustain:k,setSustain:S,release:j,setRelease:C,modOscillatorType:z,setModOscillatorType:R,modAttack:x,setModAttack:D,modDecay:q,setModDecay:A,modSustain:F,setModSustain:L,modRelease:T,setModRelease:I,modulationIndex:H,setModulationIndex:U,harmonicity:B,setHarmonicity:K,delayAmount:Y,setDelayAmount:J,delayFeedback:W,setDelayFeedback:Z,reverbAmount:G,setReverbAmount:P,filterCutoff:Q,setFilterCutoff:V,filterResonance:X,setFilterResonance:$,distortionAmount:_,setDistortionAmount:ee,chorusDepth:te,setChorusDepth:ae}),l.a.createElement(b,{upMappings:be,baseMappings:he,downMappings:fe,activeFreqs:ie,onNoteDown:we,onNoteUp:Ne,currentMaqam:ne,setCurrentMaqam:le,tMaqamsIntervals:y}))};var M=function(){return l.a.createElement("div",null,l.a.createElement(N,null)," ")};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(M,null)))},8:function(e,t,a){e.exports=a(30)}},[[8,1,2]]]);
//# sourceMappingURL=main.752b8055.chunk.js.map