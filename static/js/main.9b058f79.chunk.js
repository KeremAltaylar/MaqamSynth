(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),s=(a(16),a(17),a(2));var o=e=>{let{currentMaqam:t,setCurrentMaqam:a,tMaqamsIntervals:n,rootNoteOffset:l,setRootNoteOffset:c,oscillatorType:s,setOscillatorType:o,attack:u,setAttack:i,decay:m,setDecay:d,sustain:p,setSustain:v,release:h,setRelease:g,delayAmount:E,setDelayAmount:b,delayFeedback:y,setDelayFeedback:f,reverbAmount:k,setReverbAmount:w}=e;return r.a.createElement("div",{className:"synth-controls-container"},r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"maqam-select"},"Select Maqam:"),r.a.createElement("select",{id:"maqam-select",value:t,onChange:e=>a(e.target.value)},Object.keys(n).map(e=>r.a.createElement("option",{key:e,value:e},e)))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"root-offset-slider"},"Root Octave Offset:"),r.a.createElement("input",{id:"root-offset-slider",type:"range",min:"-2",max:"2",step:"1",value:l,onChange:e=>c(parseInt(e.target.value))}),r.a.createElement("span",null,l)),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",null,"Oscillator Type:"),r.a.createElement("div",{className:"radio-group"},r.a.createElement("input",{type:"radio",id:"sine",name:"oscType",value:"sine",checked:"sine"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"sine"},"Sine"),r.a.createElement("input",{type:"radio",id:"sawtooth",name:"oscType",value:"sawtooth",checked:"sawtooth"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"sawtooth"},"Sawtooth"),r.a.createElement("input",{type:"radio",id:"triangle",name:"oscType",value:"triangle",checked:"triangle"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"triangle"},"Triangle"),r.a.createElement("input",{type:"radio",id:"square",name:"oscType",value:"square",checked:"square"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"square"},"Square"))),r.a.createElement("div",{className:"control-group adsr-controls"},r.a.createElement("h3",null,"Envelope (ADSR)"),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"attack-slider"},"Attack:"),r.a.createElement("input",{type:"range",id:"attack-slider",min:"0.001",max:"2",step:"0.001",value:u,onChange:e=>i(parseFloat(e.target.value))}),r.a.createElement("span",null,u.toFixed(3),"s")),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"decay-slider"},"Decay:"),r.a.createElement("input",{type:"range",id:"decay-slider",min:"0.01",max:"2",step:"0.01",value:m,onChange:e=>d(parseFloat(e.target.value))}),r.a.createElement("span",null,m.toFixed(2),"s")),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"sustain-slider"},"Sustain:"),r.a.createElement("input",{type:"range",id:"sustain-slider",min:"0",max:"1",step:"0.01",value:p,onChange:e=>v(parseFloat(e.target.value))}),r.a.createElement("span",null,p.toFixed(2))),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"release-slider"},"Release:"),r.a.createElement("input",{type:"range",id:"release-slider",min:"0.01",max:"3",step:"0.01",value:h,onChange:e=>g(parseFloat(e.target.value))}),r.a.createElement("span",null,h.toFixed(2),"s"))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"delay-slider"},"Delay (Wet Mix):"),r.a.createElement("input",{id:"delay-slider",type:"range",min:"0",max:"1",step:"0.01",value:E,onChange:e=>b(parseFloat(e.target.value))}),r.a.createElement("span",null,E.toFixed(2))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"delay-feedback-slider"},"Delay Feedback:"),r.a.createElement("input",{id:"delay-feedback-slider",type:"range",min:"0",max:"0.95",step:"0.01",value:y,onChange:e=>f(parseFloat(e.target.value))}),r.a.createElement("span",null,y.toFixed(2))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"reverb-slider"},"Reverb (Wet Mix):"),r.a.createElement("input",{id:"reverb-slider",type:"range",min:"0",max:"1",step:"0.01",value:k,onChange:e=>w(parseFloat(e.target.value))}),r.a.createElement("span",null,k.toFixed(2))))};const u=e=>{let{mappings:t=[],activeFreqs:a=new Set,onNoteDown:n=(()=>{}),onNoteUp:l=(()=>{})}=e;return r.a.createElement("div",{className:"note-grid"},t.filter(e=>e&&e.freq).map((e,t)=>{let{freq:c,name:s,key:o}=e;const u=a.has(c);return r.a.createElement("span",{key:t,className:"note-button ".concat(u?"active":""),onMouseDown:e=>{e.preventDefault(),n(c,o)},onMouseUp:e=>{e.preventDefault(),l(o)},onTouchStart:e=>{n(c,o)},onTouchEnd:e=>{l(o)}},s," ",o?"(".concat(o,")"):"")}))};var i=e=>{let{upMappings:t=[],baseMappings:a=[],downMappings:n=[],activeFreqs:l=new Set,onNoteDown:c=(()=>{}),onNoteUp:s=(()=>{})}=e;return r.a.createElement("div",{className:"note-display-section"},r.a.createElement("h2",null,"Maqam Notes:"),r.a.createElement(u,{mappings:t,activeFreqs:l,onNoteDown:c,onNoteUp:s}),r.a.createElement(u,{mappings:a,activeFreqs:l,onNoteDown:c,onNoteUp:s}),r.a.createElement(u,{mappings:n,activeFreqs:l,onNoteDown:c,onNoteUp:s}))};a(28);const m=["q","w","e","r","t","y","u","\u0131","o","p","\u011f","\xfc"],d=["a","s","d","f","g","h","j","k","l","\u015f","i",","],p=["z","x","c","v","b","n","m","\xf6","\xe7","."],v={Rast:[9,8,5,9,9,4,4,5],Nahawand:[9,4,9,9,4,9,9],HicazUzzalHumayun:[5,12,5,9,4,4,5,9],Hicazkar:[5,12,5,9,5,3,5,4,5],Yegah:[9,8,5,9,8,4,4,5],SultaniyegahRuhnevaz:[9,4,9,9,4,9,4,5],FerahnumaAskefza:[4,9,9,9,4,9,9],Sedaraban:[5,12,5,9,5,8,4,5],Huseyniasiran:[8,5,9,8,5,9,9],Suzidil:[5,1,5,4,4,5,4,5],Acemasiran:[9,9,4,4,5,9,9,4],Sevkefza:[9,5,4,4,4,5,5,13,4],Iraq:[5,9,8,5,9,9,4,4],EvicSegah:[5,9,8,5,4,5,9,4,4],Ferahnak:[5,9,8,1,4,4,5,9,4,4],Evicara:[5,13,4,9,5,13,4],Mahur:[9,9,4,9,9,4,5,4],Suzidilara:[9,5,4,4,4,5,9,4,5,4],Buzurk:[9,9,4,4,5,9,4,4,5],Suzinak:[5,4,4,4,5,9,4,9,9],ZirguleliSuzinak:[5,12,5,5,4,4,4,5,9],Kurdilihicazkar:[4,1,4,4,4,5,9,4,4,5],Nihavend:[9,4,9,5,4,4,5,8,5],Neveser:[9,5,12,5,5,12,5],Nikriz:[9,5,12,5,9,4,4,5],HuseyniMuhayyer:[8,5,9,9,4,4,5,9],GulizarBeyati:[8,5,9,5,4,4,4,5,9],UssakAcem:[8,5,9,9,4,9,9],Kurdi:[4,4,1,4,9,4,5,4,9,9],Buselik:[9,4,9,5,4,4,4,5,4,5],Arazbar:[8,5,9,5,3,1,4,4,5,9],Zirgule:[5,12,5,9,4,1,8,4,5],Sehnaz:[5,12,5,9,4,1,3,5,4,5],SabaSunbule:[8,5,5,13,4,9,9],Kucek:[8,5,5,13,4,4,5,5,4],EskiSipihr:[8,5,5,1,3,9,4,4,5,4,5],Dugah:[4,4,5,4,1,13,4,9,9],Hisar:[8,5,9,4,5,4,1,8,4,5],YeniSipihr:[5,3,5,4,5,4,5,4,1,3,5,4,5],Nisaburek:[9,8,5,9,5,8,9],Huzzam:[5,9,5,12,5,9,4,4],Mustear:[9,5,8,9,5,9,4,4],MayeYeniMaye:[5,9,8,1,4,9,9,8],VechiArazbar:[1,4,9,8,5,9,9,3,5],Nisabur:[8,5,9,4,9,9,4,5],CargahI:[5,13,4,9,5,12,5],CargahII:[9,9,4,9,9,9,4],Araban:[5,8,13,5,5,8,4,5],Urmawi:[9,8,5,9,9,5,8]},h=e=>{const t=12*Math.log2(e/440)+69,a=Math.round(t),n=Math.round(100*(t-a));let r=["Do","Do\u266f","Re","Re\u266f","Mi","Fa","Fa\u266f","Sol","Sol\u266f","La","La\u266f","Si"][a%12];const l=Math.floor(a/12)-1;return Math.abs(n)>10&&Math.abs(n)<90&&(r+=n>0?"\u2191":"\u2193"),"".concat(r).concat(l)};var g=()=>{var e;const t=Object(n.useRef)(null),a=Object(n.useRef)(null),l=Object(n.useRef)(null),c=Object(n.useRef)(null),u=Object(n.useRef)(null),[g,E]=Object(n.useState)("sine"),[b,y]=Object(n.useState)(.01),[f,k]=Object(n.useState)(.2),[w,M]=Object(n.useState)(.5),[S,F]=Object(n.useState)(1),[N,O]=Object(n.useState)(0),[q,j]=Object(n.useState)(.5),[x,C]=Object(n.useState)(0),[D,R]=Object(n.useState)("Rast"),[z,A]=Object(n.useState)([]),[L,T]=Object(n.useState)(0),U=((null===(e=v[D])||void 0===e?void 0:e.length)||0)+1,[I,H]=Object(n.useState)(new Set),B=r.a.useMemo(()=>d.slice(0,U),[U]),K=r.a.useMemo(()=>p.slice(0,Math.min(U,p.length)),[U]),Y=r.a.useMemo(()=>m.slice(0,Math.min(U,m.length)),[U]),J=r.a.useCallback((e,t)=>e.map((e,a)=>{const n=t*U+a,r=z[n];return{key:e,freq:r,name:r?h(r):"",index:n}}),[z,U]),W=r.a.useMemo(()=>J(Y,2),[Y,J]),Z=r.a.useMemo(()=>J(B,1),[B,J]),G=r.a.useMemo(()=>J(K,0),[K,J]),V=Object(n.useRef)(new Map),P=Object(n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:110;const a=v[e];if(!a)return console.warn('Maqam "'.concat(e,'" not found in intervals dictionary.')),[];const n=[t];let r=t;for(let c=0;c<a.length;c++)r*=Math.pow(2,a[c]/53),n.push(r);const l=[];for(let c=-1;c<=2;c++)n.forEach(e=>{l.push(e*Math.pow(2,c))});return l.sort((e,t)=>e-t),l},[]);Object(n.useEffect)(()=>{if(!t.current){a.current=new s.c(.5),l.current=new s.b("8n",q).set({wet:0}),c.current=new s.f({decay:1.5,wet:.05}).set({wet:0}),u.current=new s.d(-6),t.current=new s.e(s.g,{oscillator:{type:g},envelope:{attack:b,decay:f,sustain:w,release:S}}).chain(l.current,c.current,u.current,a.current,s.a);const e=()=>{"running"!==s.h.state&&(s.i(),console.log("Audio context started.")),document.removeEventListener("keydown",e),document.removeEventListener("click",e),document.removeEventListener("touchstart",e)};document.addEventListener("keydown",e),document.addEventListener("click",e),document.addEventListener("touchstart",e,{passive:!0})}},[]),Object(n.useEffect)(()=>{const e=110*Math.pow(2,L),t=P(D,e);A(t),console.log("Maqam: ".concat(D,", Root Freq: ").concat(e,", Notes:"),t.map(e=>e.toFixed(2)))},[D,L,P]),Object(n.useEffect)(()=>{t.current&&t.current.set({oscillator:{type:g},envelope:{attack:b,decay:f,sustain:w,release:S}})},[g,b,f,w,S]),Object(n.useEffect)(()=>{l.current&&(l.current.wet.value=N,l.current.feedback.value=q)},[N,q]),Object(n.useEffect)(()=>{c.current&&(c.current.wet.value=x)},[x]);const Q=Object(n.useCallback)((e,a)=>{t.current&&!V.current.has(a)&&(t.current.triggerAttack(e),V.current.set(a,e),H(t=>{const a=new Set(t);return a.add(e),a}))},[]),X=Object(n.useCallback)(e=>{if(t.current&&V.current.has(e)){const a=V.current.get(e);t.current.triggerRelease(a),V.current.delete(e),H(e=>{const t=new Set(e);return t.delete(a),t})}},[]);return Object(n.useEffect)(()=>{const e=B,t=K,a=Y,n=n=>{const r=n.key.toLowerCase();if(![...e,...t,...a].includes(r))return;n.preventDefault();let l=-1,c=-1;if(e.includes(r)?(l=e.indexOf(r),c=1):t.includes(r)?(l=t.indexOf(r),c=0):a.includes(r)&&(l=a.indexOf(r),c=2),-1!==l&&z.length>0){const e=c*U+l;e>=0&&e<z.length?Q(z[e],r):console.warn('Key "'.concat(r,'" maps to an out-of-bounds note index: ').concat(e,". Maqam notes length: ").concat(z.length,". Current Maqam Scale Length: ").concat(U))}},r=e=>{const t=e.key.toLowerCase();[...B,...K,...Y].includes(t)&&(e.preventDefault(),X(t))};return window.addEventListener("keydown",n),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",r),V.current.clear(),H(new Set)}},[z,D,Q,X,U,B,K,Y]),r.a.createElement("div",{className:"maqam-synth-container"},r.a.createElement("h1",null,"Turkish Maqam Synthesizer"),r.a.createElement(o,{currentMaqam:D,setCurrentMaqam:R,tMaqamsIntervals:v,rootNoteOffset:L,setRootNoteOffset:T,oscillatorType:g,setOscillatorType:E,attack:b,setAttack:y,decay:f,setDecay:k,sustain:w,setSustain:M,release:S,setRelease:F,delayAmount:N,setDelayAmount:O,delayFeedback:q,setDelayFeedback:j,reverbAmount:x,setReverbAmount:C}),r.a.createElement(i,{upMappings:W,baseMappings:Z,downMappings:G,activeFreqs:I,onNoteDown:(e,t)=>Q(e,t),onNoteUp:e=>X(e)}))};var E=function(){return r.a.createElement("div",null,r.a.createElement(g,null)," ")};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)))},7:function(e,t,a){e.exports=a(29)}},[[7,1,2]]]);
//# sourceMappingURL=main.9b058f79.chunk.js.map