{"version":3,"sources":["components/NexusDial.js","components/SynthControls.js","components/MaqamNoteDisplay.js","components/MaqamSynth.js","App.js","index.js"],"names":["NexusDial","_ref","value","min","max","step","onChange","size","containerRef","useRef","dialRef","useEffect","current","innerHTML","dial","Nexus","Dial","interaction","mode","accentColor","fillColor","mediumColor","colorize","on","v","destroy","Math","abs","React","createElement","ref","style","display","dialSize","SegmentedControl","options","name","className","map","option","key","concat","type","checked","e","target","label","OctaveControl","_ref2","parseInt","SynthControls","_ref3","rootNoteOffset","setRootNoteOffset","oscillatorType","setOscillatorType","attack","setAttack","decay","setDecay","sustain","setSustain","release","setRelease","modOscillatorType","setModOscillatorType","modAttack","setModAttack","modDecay","setModDecay","modSustain","setModSustain","modRelease","setModRelease","modulationIndex","setModulationIndex","harmonicity","setHarmonicity","delayAmount","setDelayAmount","delayFeedback","setDelayFeedback","reverbAmount","setReverbAmount","filterCutoff","setFilterCutoff","filterResonance","setFilterResonance","distortionAmount","setDistortionAmount","chorusDepth","setChorusDepth","waveOptions","Row","mappings","activeFreqs","Set","onNoteDown","onNoteUp","filter","m","freq","idx","isActive","has","onMouseDown","preventDefault","onMouseUp","onTouchStart","onTouchEnd","MaqamNoteDisplay","upMappings","baseMappings","downMappings","currentMaqam","setCurrentMaqam","tMaqamsIntervals","htmlFor","id","Object","keys","maqam","UP_KEY_POOL","BASE_KEY_POOL","DOWN_KEY_POOL","Rast","Nahawand","HicazUzzalHumayun","Hicazkar","Yegah","SultaniyegahRuhnevaz","FerahnumaAskefza","Sedaraban","Huseyniasiran","Suzidil","Acemasiran","Sevkefza","Iraq","EvicSegah","Ferahnak","Evicara","Mahur","Suzidilara","Buzurk","Suzinak","ZirguleliSuzinak","Kurdilihicazkar","Nihavend","Neveser","Nikriz","HuseyniMuhayyer","GulizarBeyati","UssakAcem","Kurdi","Buselik","Arazbar","Zirgule","Sehnaz","SabaSunbule","Kucek","EskiSipihr","Dugah","Hisar","YeniSipihr","Nisaburek","Huzzam","Mustear","MayeYeniMaye","VechiArazbar","Nisabur","CargahI","CargahII","Araban","Urmawi","frequencyToNoteName","frequency","midiNote","log2","roundedMidiNote","round","cents","noteName","octave","floor","MaqamSynth","_tMaqamsIntervals$cur","synth","gainNode","delayEffect","reverbEffect","filterEffect","distortionEffect","chorusEffect","limiter","useState","maqamNotes","setMaqamNotes","currentMaqamScaleLength","length","setActiveFreqs","baseOctaveKeys","useMemo","slice","octaveDownKeys","octaveUpKeys","buildMappings","useCallback","octaveSlot","k","i","index","activeNotes","Map","calculateMaqamFrequencies","maqamName","rootFrequency","arguments","undefined","ratio","console","warn","maqamFrequencies","currentFreq","pow","push","fullMaqamScale","oct","forEach","sort","a","b","Tone","set","wet","oscillator","envelope","modulation","modulationEnvelope","chain","startAudio","state","log","document","removeEventListener","addEventListener","passive","newRootFrequency","newNotes","n","toFixed","delayTime","feedback","Q","distortion","depth","triggerAttack","prev","s","add","triggerRelease","get","delete","baseOctaveKeysLocal","octaveDownKeysLocal","octaveUpKeysLocal","handleKeyDown","toLowerCase","includes","baseKeyIndex","indexOf","absoluteNoteIndex","handleKeyUp","window","clear","App","ReactDOM","createRoot","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.752b8055.chunk.js","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport Nexus from 'nexusui';\n\nconst NexusDial = ({ value, min, max, step = 0, onChange, size = [60, 60] }) => {\n  const containerRef = useRef(null);\n  const dialRef = useRef(null);\n\n  useEffect(() => {\n    if (containerRef.current) {\n      // Clear container just in case\n      containerRef.current.innerHTML = '';\n      \n      const dial = new Nexus.Dial(containerRef.current, {\n        'size': size,\n        'interaction': 'vertical',\n        'mode': 'relative',\n        'min': min,\n        'max': max,\n        'step': step,\n        'value': value\n      });\n\n      // Pastel Theme Colors\n      const accentColor = \"#FFB7B2\"; // Pastel Red/Pink\n      const fillColor = \"#E0F2F1\";   // Very Light Teal (Panel contrast)\n      const mediumColor = \"#4A4063\"; // Dark Violet (Lines)\n\n      dial.colorize(\"accent\", accentColor);\n      dial.colorize(\"fill\", fillColor);\n      dial.colorize(\"medium\", mediumColor);\n\n      dial.on('change', (v) => {\n        onChange(v);\n      });\n\n      dialRef.current = dial;\n\n      return () => {\n        if (dialRef.current) {\n          dialRef.current.destroy();\n        }\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Empty dependency array to initialize once\n\n  // Update dial when prop value changes (if change didn't originate from dial)\n  useEffect(() => {\n    if (dialRef.current && dialRef.current.value !== value) {\n      // Check if difference is significant to avoid loops\n      if (Math.abs(dialRef.current.value - value) > (step || 0.001)) {\n        dialRef.current.value = value;\n      }\n    }\n  }, [value, step]);\n\n  return <div ref={containerRef} style={{ display: 'inline-block' }} />;\n};\n\nexport default NexusDial;\n","import React from 'react';\nimport NexusDial from './NexusDial';\n\nconst dialSize = [45, 45];\n\n// Reusable Segmented Control Component\nconst SegmentedControl = ({ options, value, onChange, name }) => {\n  return (\n    <div className=\"segmented-control\">\n      {options.map((option) => (\n        <label key={option.value} className={`segment ${value === option.value ? 'active' : ''}`}>\n          <input\n            type=\"radio\"\n            name={name}\n            value={option.value}\n            checked={value === option.value}\n            onChange={(e) => onChange(e.target.value)}\n          />\n          <span>{option.label}</span>\n        </label>\n      ))}\n    </div>\n  );\n};\n\n// Reusable Stepper/Segmented Control for Octave\nconst OctaveControl = ({ value, onChange }) => {\n  const options = [\n    { label: '-2', value: -2 },\n    { label: '-1', value: -1 },\n    { label: '0', value: 0 },\n    { label: '+1', value: 1 },\n    { label: '+2', value: 2 },\n  ];\n\n  return (\n    <div className=\"segmented-control octave-control\">\n      {options.map((option) => (\n        <label key={option.value} className={`segment ${value === option.value ? 'active' : ''}`}>\n           <input\n            type=\"radio\"\n            name=\"octave\"\n            value={option.value}\n            checked={value === option.value}\n            onChange={(e) => onChange(parseInt(e.target.value))}\n          />\n          <span>{option.label}</span>\n        </label>\n      ))}\n    </div>\n  );\n};\n\n\nconst SynthControls = ({ \n  // Maqam props removed\n  rootNoteOffset, setRootNoteOffset,\n  oscillatorType, setOscillatorType,\n  attack, setAttack, decay, setDecay, sustain, setSustain, release, setRelease,\n  // Modulation\n  modOscillatorType, setModOscillatorType,\n  modAttack, setModAttack, modDecay, setModDecay, modSustain, setModSustain, modRelease, setModRelease,\n  modulationIndex, setModulationIndex, harmonicity, setHarmonicity,\n  // Effects\n  delayAmount, setDelayAmount, delayFeedback, setDelayFeedback,\n  reverbAmount, setReverbAmount,\n  filterCutoff, setFilterCutoff, filterResonance, setFilterResonance,\n  distortionAmount, setDistortionAmount,\n  chorusDepth, setChorusDepth\n}) => {\n\n  const waveOptions = [\n    { label: 'Sin', value: 'sine' },\n    { label: 'Saw', value: 'sawtooth' },\n    { label: 'Tri', value: 'triangle' },\n    { label: 'Sqr', value: 'square' },\n  ];\n\n  return (\n    <div className=\"synth-controls-container\">\n      {/* Top Row: Global, Osc Types, Mod Params, Effects */}\n      <div className=\"controls-row top-row\">\n        <div className=\"control-group offset-group\">\n          <label>Root Octave</label>\n          <OctaveControl value={rootNoteOffset} onChange={setRootNoteOffset} />\n        </div>\n\n        <div className=\"control-group osc-type-group\">\n          <label>Osc 1 Wave</label>\n          <SegmentedControl options={waveOptions} value={oscillatorType} onChange={setOscillatorType} name=\"oscType\" />\n        </div>\n\n        <div className=\"control-group osc-type-group\">\n          <label>Osc 2 (Mod) Wave</label>\n          <SegmentedControl options={waveOptions} value={modOscillatorType} onChange={setModOscillatorType} name=\"modOscType\" />\n        </div>\n\n         <div className=\"control-group mod-params-group compact-group\">\n            <label>FM Params</label>\n             <div className=\"adsr-row\">\n                <div className=\"control-item dial-item\">\n                  <label>Index</label>\n                  <NexusDial size={dialSize} min={0} max={100} step={1} value={modulationIndex} onChange={setModulationIndex} />\n                </div>\n                <div className=\"control-item dial-item\">\n                  <label>Harmonic</label>\n                  <NexusDial size={dialSize} min={0.1} max={10} step={0.1} value={harmonicity} onChange={setHarmonicity} />\n                </div>\n             </div>\n         </div>\n\n        <div className=\"control-group fx-controls compact-group\">\n          <label>Effects Rack</label>\n          <div className=\"adsr-row\">\n             {/* Filter */}\n             <div className=\"control-item dial-item\">\n              <label>Cutoff</label>\n              <NexusDial size={dialSize} min={20} max={5000} step={10} value={filterCutoff} onChange={setFilterCutoff} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>Res</label>\n              <NexusDial size={dialSize} min={0} max={20} step={0.1} value={filterResonance} onChange={setFilterResonance} />\n            </div>\n             {/* Distortion */}\n            <div className=\"control-item dial-item\">\n              <label>Dist</label>\n              <NexusDial size={dialSize} min={0} max={1} step={0.01} value={distortionAmount} onChange={setDistortionAmount} />\n            </div>\n            {/* Chorus */}\n             <div className=\"control-item dial-item\">\n              <label>Chorus</label>\n              <NexusDial size={dialSize} min={0} max={1} step={0.01} value={chorusDepth} onChange={setChorusDepth} />\n            </div>\n            {/* Delay & Reverb */}\n            <div className=\"control-item dial-item\">\n              <label>D.Mix</label>\n              <NexusDial size={dialSize} min={0} max={1} step={0.01} value={delayAmount} onChange={setDelayAmount} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>D.Fdbk</label>\n              <NexusDial size={dialSize} min={0} max={0.95} step={0.01} value={delayFeedback} onChange={setDelayFeedback} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>Reverb</label>\n              <NexusDial size={dialSize} min={0} max={1} step={0.01} value={reverbAmount} onChange={setReverbAmount} />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Bottom Row: Envelopes */}\n      <div className=\"controls-row bottom-row\">\n        <div className=\"control-group adsr-controls\">\n          <h3>Osc 1 Envelope</h3>\n          <div className=\"adsr-row\">\n            <div className=\"control-item dial-item\">\n              <label>A</label>\n              <NexusDial size={dialSize} min={0.001} max={2} step={0.001} value={attack} onChange={setAttack} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>D</label>\n              <NexusDial size={dialSize} min={0.01} max={2} step={0.01} value={decay} onChange={setDecay} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>S</label>\n              <NexusDial size={dialSize} min={0} max={1} step={0.01} value={sustain} onChange={setSustain} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>R</label>\n              <NexusDial size={dialSize} min={0.01} max={3} step={0.01} value={release} onChange={setRelease} />\n            </div>\n          </div>\n        </div>\n\n        <div className=\"control-group adsr-controls\">\n          <h3>Osc 2 (Mod) Envelope</h3>\n          <div className=\"adsr-row\">\n            <div className=\"control-item dial-item\">\n              <label>A</label>\n              <NexusDial size={dialSize} min={0.001} max={2} step={0.001} value={modAttack} onChange={setModAttack} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>D</label>\n              <NexusDial size={dialSize} min={0.01} max={2} step={0.01} value={modDecay} onChange={setModDecay} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>S</label>\n              <NexusDial size={dialSize} min={0} max={1} step={0.01} value={modSustain} onChange={setModSustain} />\n            </div>\n            <div className=\"control-item dial-item\">\n              <label>R</label>\n              <NexusDial size={dialSize} min={0.01} max={3} step={0.01} value={modRelease} onChange={setModRelease} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SynthControls;\n","import React from 'react';\n\nconst Row = ({ mappings = [], activeFreqs = new Set(), onNoteDown = () => {}, onNoteUp = () => {} }) => {\n  return (\n    <div className=\"note-grid\">\n      {mappings\n        .filter(m => m && m.freq)\n        .map(({ freq, name, key }, idx) => {\n          const isActive = activeFreqs.has(freq);\n          return (\n            <span\n              key={idx}\n              className={`note-button ${isActive ? 'active' : ''}`}\n              onMouseDown={(e) => { e.preventDefault(); onNoteDown(freq, key); }}\n              onMouseUp={(e) => { e.preventDefault(); onNoteUp(key); }}\n              onTouchStart={(e) => { onNoteDown(freq, key); }}\n              onTouchEnd={(e) => { onNoteUp(key); }}\n            >\n              {name} {key ? `(${key})` : ''}\n            </span>\n          );\n        })}\n    </div>\n  );\n};\n\nconst MaqamNoteDisplay = ({ \n  upMappings = [], baseMappings = [], downMappings = [], \n  activeFreqs = new Set(), onNoteDown = () => {}, onNoteUp = () => {},\n  currentMaqam, setCurrentMaqam, tMaqamsIntervals \n}) => {\n  return (\n    <div className=\"note-display-section\">\n      <div className=\"note-header\">\n        <h2>Maqam Notes</h2>\n        {tMaqamsIntervals && (\n          <div className=\"maqam-selector\">\n             <label htmlFor=\"maqam-select-note\">Select Maqam:</label>\n             <select\n               id=\"maqam-select-note\"\n               value={currentMaqam}\n               onChange={(e) => setCurrentMaqam(e.target.value)}\n             >\n               {Object.keys(tMaqamsIntervals).map((maqam) => (\n                 <option key={maqam} value={maqam}>{maqam}</option>\n               ))}\n             </select>\n          </div>\n        )}\n      </div>\n      <div className=\"rows-container\">\n        <Row mappings={upMappings} activeFreqs={activeFreqs} onNoteDown={onNoteDown} onNoteUp={onNoteUp} />\n        <Row mappings={baseMappings} activeFreqs={activeFreqs} onNoteDown={onNoteDown} onNoteUp={onNoteUp} />\n        <Row mappings={downMappings} activeFreqs={activeFreqs} onNoteDown={onNoteDown} onNoteUp={onNoteUp} />\n      </div>\n    </div>\n  );\n};\n\nexport default MaqamNoteDisplay;\n","import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport * as Tone from 'tone';\nimport SynthControls from './SynthControls';\nimport MaqamNoteDisplay from './MaqamNoteDisplay';\nimport './MaqamSynth.css';\n\n// --- Global Maqam Data (constants) ---\nconst ROOT_FREQUENCY = 110; // Root frequency, likely A1 in Hz\nconst MICROTONAL_SIZE = 53; // Number of steps in the equal temperament system (53-TET)\nconst UP_KEY_POOL = ['q', 'w', 'e', 'r', 't', 'y', 'u', 'ı', 'o', 'p', 'ğ', 'ü'];\nconst BASE_KEY_POOL = ['a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'ş', 'i', ','];\nconst DOWN_KEY_POOL = ['z', 'x', 'c', 'v', 'b', 'n', 'm', 'ö', 'ç', '.'];\n\n// The dictionary of Turkish Maqams intervals in 53-TET steps\nconst tMaqamsIntervals = {\n    Rast: [9,8,5,9,9,4,4,5], Nahawand: [9,4,9,9,4,9,9], HicazUzzalHumayun: [5,12,5,9,4,4,5,9], Hicazkar: [5,12,5,9,5,3,5,4,5], Yegah: [9,8,5,9,8,4,4,5], SultaniyegahRuhnevaz: [9,4,9,9,4,9,4,5], FerahnumaAskefza: [4,9,9,9,4,9,9], Sedaraban: [5,12,5,9,5,8,4,5], Huseyniasiran: [8,5,9,8,5,9,9], Suzidil: [5,1,5,4 ,4,5,4,5], Acemasiran: [9,9,4,4,5,9,9,4], Sevkefza: [9,5,4,4,4,5,5,13,4], Iraq: [5,9,8,5,9,9,4,4],EvicSegah: [5,9,8,5,4,5,9,4,4], Ferahnak: [5,9,8,1,4,4,5,9,4, 4], Evicara: [5,13,4,9,5,13,4], Mahur: [9,9,4,9,9,4,5,4], Suzidilara: [9,5,4,4,4 ,5,9,4,5,4], Buzurk: [9,9,4,4,5,9,4,4,5], Suzinak: [5,4,4,4,5,9,4,9,9], ZirguleliSuzinak: [5,12,5,5,4,4,4,5,9], Kurdilihicazkar: [4,1,4,4,4,5,9,4,4,5], Nihavend: [9,4,9,5,4,4,5,8,5], Neveser: [9,5,12,5,5,12,5], Nikriz: [9,5,12,5,9,4 ,4,5], HuseyniMuhayyer:[8,5,9,9,4,4,5,9], GulizarBeyati: [8,5,9,5,4,4,4,5,9], UssakAcem: [8,5,9,9,4,9,9],\n    Kurdi: [4,4,1,4,9,4,5,4,9,9], Buselik: [9,4,9,5,4,4,4,5,4,5], Arazbar: [8,5,9,5,3,1,4,4,5,9],  Zirgule: [5,12,5,9,4,1,8,4,5], Sehnaz: [5,12,5,9,4,1,3,5,4,5], SabaSunbule: [8,5,5,13,4,9,9],  Kucek: [8,5,5,13,4,4,5,5,4], EskiSipihr: [8,5,5,1,3,9,4,4,5,4,5],  Dugah:[4,4,5,4,1,13,4,9,9],\n    Hisar: [8,5,9,4,5,4,1,8,4,5], YeniSipihr: [5,3,5,4,5,4,5,4,1,3,5,4,5], Nisaburek: [9,8,5,9,5,8,9], Huzzam: [5,9,5,12, 5,9,4,4], Mustear: [9,5,8,9,5,9,4,4], MayeYeniMaye: [5,9,8,1,4,9,9,8], VechiArazbar: [1,4,9,8,5,9,9,3,5], Nisabur: [8,5,9,4,9,9,4,5],  CargahI: [5,13,4,9,5,12,5], CargahII: [9,9,4,9,9,9,4], Araban: [5,8,13,5,5,8,4,5], Urmawi: [9,8,5,9,9,5,8]\n};\n\n// Helper function to convert frequency to a musical note name (e.g., A4, C#5)\n// Helper function to convert frequency to Turkish Maqam note name\nconst frequencyToNoteName = (frequency) => {\n  const A4 = 440; // A4 frequency\n  const A4_MIDI = 69; // MIDI note number for A4\n\n  // Calculate MIDI note number\n  const midiNote = 12 * (Math.log2(frequency / A4)) + A4_MIDI;\n  \n  // Round to the nearest integer for standard notes, or keep decimal for microtonal\n  const roundedMidiNote = Math.round(midiNote);\n  const cents = Math.round((midiNote - roundedMidiNote) * 100);\n\n  // Turkish note names according to Nail Yavuzoğlu's theory\n  const turkishNoteNames = [\n    \"Do\", // C\n    \"Do♯\", // C#\n    \"Re\", // D\n    \"Re♯\", // D#\n    \"Mi\", // E\n    \"Fa\", // F\n    \"Fa♯\", // F#\n    \"Sol\", // G\n    \"Sol♯\", // G#\n    \"La\", // A\n    \"La♯\", // A#\n    \"Si\"  // B\n  ];\n\n  // Special symbols for microtonal intervals\n  let noteName = turkishNoteNames[roundedMidiNote % 12];\n  const octave = Math.floor(roundedMidiNote / 12) - 1; // MIDI note 0 is C-1\n  \n  // Add microtonal symbols if needed\n  if (Math.abs(cents) > 10 && Math.abs(cents) < 90) {\n    if (cents > 0) {\n      noteName += \"↑\"; // Up arrow for slightly sharp\n    } else {\n      noteName += \"↓\"; // Down arrow for slightly flat\n    }\n  }\n\n  return `${noteName}${octave}`;\n};\n\nconst MaqamSynth = () => {\n  const synth = useRef(null);\n  const gainNode = useRef(null);\n  const delayEffect = useRef(null);\n  const reverbEffect = useRef(null);\n  const filterEffect = useRef(null); // Filter\n  const distortionEffect = useRef(null); // Distortion\n  const chorusEffect = useRef(null); // Chorus\n  const limiter = useRef(null); // Add a limiter to prevent clipping\n\n  // --- State for Synth Parameters ---\n  const [oscillatorType, setOscillatorType] = useState('sine');\n  const [attack, setAttack] = useState(0.01); // Default attack\n  const [decay, setDecay] = useState(0.2);   // Default decay\n  const [sustain, setSustain] = useState(0.5); // Default sustain\n  const [release, setRelease] = useState(1.0);  // Default release\n\n  // --- State for Modulation Oscillator ---\n  const [modOscillatorType, setModOscillatorType] = useState('sine');\n  const [modAttack, setModAttack] = useState(0.01);\n  const [modDecay, setModDecay] = useState(0.2);\n  const [modSustain, setModSustain] = useState(0.5);\n  const [modRelease, setModRelease] = useState(1.0);\n  const [modulationIndex, setModulationIndex] = useState(10);\n  const [harmonicity, setHarmonicity] = useState(1);\n\n  // --- State for Effects ---\n  const [delayAmount, setDelayAmount] = useState(0);\n  const [delayFeedback, setDelayFeedback] = useState(0.5); // New: Delay Feedback\n  const [reverbAmount, setReverbAmount] = useState(0);\n  const [filterCutoff, setFilterCutoff] = useState(2000); // Filter Cutoff\n  const [filterResonance, setFilterResonance] = useState(1); // Filter Resonance (Q)\n  const [distortionAmount, setDistortionAmount] = useState(0); // Distortion Amount\n  const [chorusDepth, setChorusDepth] = useState(0); // Chorus Depth\n\n  // --- Maqam related states ---\n  const [currentMaqam, setCurrentMaqam] = useState('Rast');\n  const [maqamNotes, setMaqamNotes] = useState([]);\n  const [rootNoteOffset, setRootNoteOffset] = useState(0);\n  const currentMaqamScaleLength = (tMaqamsIntervals[currentMaqam]?.length || 0) + 1;\n  const [activeFreqs, setActiveFreqs] = useState(new Set());\n  const baseOctaveKeys = React.useMemo(() => BASE_KEY_POOL.slice(0, currentMaqamScaleLength), [currentMaqamScaleLength]);\n  const octaveDownKeys = React.useMemo(() => DOWN_KEY_POOL.slice(0, Math.min(currentMaqamScaleLength, DOWN_KEY_POOL.length)), [currentMaqamScaleLength]);\n  const octaveUpKeys = React.useMemo(() => UP_KEY_POOL.slice(0, Math.min(currentMaqamScaleLength, UP_KEY_POOL.length)), [currentMaqamScaleLength]);\n  const buildMappings = React.useCallback((keys, octaveSlot) => keys.map((k, i) => {\n    const idx = (octaveSlot * currentMaqamScaleLength) + i;\n    const freq = maqamNotes[idx];\n    return { key: k, freq, name: freq ? frequencyToNoteName(freq) : '', index: idx };\n  }), [maqamNotes, currentMaqamScaleLength]);\n  const upMappings = React.useMemo(() => buildMappings(octaveUpKeys, 2), [octaveUpKeys, buildMappings]);\n  const baseMappings = React.useMemo(() => buildMappings(baseOctaveKeys, 1), [baseOctaveKeys, buildMappings]);\n  const downMappings = React.useMemo(() => buildMappings(octaveDownKeys, 0), [octaveDownKeys, buildMappings]);\n\n  // Keep track of currently pressed keys to handle sustained notes\n  const activeNotes = useRef(new Map()); // Map: key -> frequency\n\n  // --- Maqam Calculation Logic ---\n  const calculateMaqamFrequencies = useCallback((maqamName, rootFrequency = ROOT_FREQUENCY) => {\n    const ratio = tMaqamsIntervals[maqamName];\n\n    if (!ratio) {\n      console.warn(`Maqam \"${maqamName}\" not found in intervals dictionary.`);\n      return [];\n    }\n\n    const maqamFrequencies = [rootFrequency];\n    let currentFreq = rootFrequency;\n\n    for (let i = 0; i < ratio.length; i++) {\n      currentFreq *= Math.pow(2, (ratio[i] / MICROTONAL_SIZE));\n      maqamFrequencies.push(currentFreq);\n    }\n\n    const fullMaqamScale = [];\n    const minOctave = -1; // Go one octave down from root\n    const maxOctave = 2; // Go two octaves up from root\n\n    for (let oct = minOctave; oct <= maxOctave; oct++) {\n      maqamFrequencies.forEach(freq => {\n        fullMaqamScale.push(freq * Math.pow(2, oct));\n      });\n    }\n\n    fullMaqamScale.sort((a, b) => a - b);\n    return fullMaqamScale;\n\n  }, []);\n\n  // --- Initialize Synth and Effects ---\n  useEffect(() => {\n    if (!synth.current) {\n      // Create master gain node\n      gainNode.current = new Tone.Gain(0.5);\n\n      // Create effects\n      delayEffect.current = new Tone.FeedbackDelay(\"8n\", delayFeedback).set({ wet: 0 });\n      reverbEffect.current = new Tone.Reverb({ decay: 1.5, wet: 0.05 }).set({ wet: 0 });\n      filterEffect.current = new Tone.Filter(2000, \"lowpass\");\n      distortionEffect.current = new Tone.Distortion(0).set({ wet: 0 });\n      chorusEffect.current = new Tone.Chorus(4, 2.5, 0.5).set({ wet: 0 });\n      limiter.current = new Tone.Limiter(-6); // -6 dB threshold, prevents clipping\n\n      // Chain: Synth -> Distortion -> Filter -> Chorus -> Delay -> Reverb -> Limiter -> Gain -> Destination\n      synth.current = new Tone.PolySynth(Tone.FMSynth, {\n        oscillator: { type: oscillatorType },\n        envelope: { attack, decay, sustain, release },\n        modulation: { type: modOscillatorType },\n        modulationEnvelope: { \n          attack: modAttack, \n          decay: modDecay, \n          sustain: modSustain, \n          release: modRelease \n        },\n        modulationIndex: modulationIndex,\n        harmonicity: harmonicity\n      }).chain(distortionEffect.current, filterEffect.current, chorusEffect.current, delayEffect.current, reverbEffect.current, limiter.current, gainNode.current, Tone.Destination);\n\n      // Start Tone.js context on first user interaction\n      const startAudio = () => {\n        if (Tone.context.state !== 'running') {\n          Tone.start();\n          console.log('Audio context started.');\n        }\n        document.removeEventListener('keydown', startAudio);\n        document.removeEventListener('click', startAudio);\n        document.removeEventListener('touchstart', startAudio);\n      };\n      document.addEventListener('keydown', startAudio);\n      document.addEventListener('click', startAudio);\n      document.addEventListener('touchstart', startAudio, { passive: true });\n    }\n  }, []); // Empty dependency array: runs only once on mount\n\n  // --- Update Maqam Notes ---\n  useEffect(() => {\n    const newRootFrequency = ROOT_FREQUENCY * Math.pow(2, rootNoteOffset);\n    const newNotes = calculateMaqamFrequencies(currentMaqam, newRootFrequency);\n    setMaqamNotes(newNotes);\n    console.log(`Maqam: ${currentMaqam}, Root Freq: ${newRootFrequency}, Notes:`, newNotes.map(n => n.toFixed(2)));\n  }, [currentMaqam, rootNoteOffset, calculateMaqamFrequencies]);\n\n  // --- Update Synth Parameters (ADSR, Oscillator Type) ---\n  useEffect(() => {\n    if (synth.current) {\n      synth.current.set({\n        oscillator: { type: oscillatorType },\n        envelope: { attack, decay, sustain, release },\n        modulation: { type: modOscillatorType },\n        modulationEnvelope: { \n          attack: modAttack, \n          decay: modDecay, \n          sustain: modSustain, \n          release: modRelease \n        },\n        modulationIndex: modulationIndex,\n        harmonicity: harmonicity\n      });\n    }\n  }, [\n    oscillatorType, attack, decay, sustain, release,\n    modOscillatorType, modAttack, modDecay, modSustain, modRelease,\n    modulationIndex, harmonicity\n  ]);\n\n  // --- Update Effects Parameters ---\n  useEffect(() => {\n    if (delayEffect.current) {\n      delayEffect.current.delayTime.value = \"8n\"; // Fixed time for now\n      delayEffect.current.feedback.value = delayFeedback;\n      delayEffect.current.wet.value = delayAmount;\n    }\n    if (reverbEffect.current) {\n      reverbEffect.current.wet.value = reverbAmount;\n    }\n    if (filterEffect.current) {\n      filterEffect.current.frequency.value = filterCutoff;\n      filterEffect.current.Q.value = filterResonance;\n    }\n    if (distortionEffect.current) {\n      distortionEffect.current.distortion = distortionAmount;\n      distortionEffect.current.wet.value = distortionAmount > 0 ? 1 : 0; // Simple wet/dry mix logic or always 1 if amount > 0\n    }\n    if (chorusEffect.current) {\n      chorusEffect.current.depth = chorusDepth;\n      chorusEffect.current.wet.value = chorusDepth > 0 ? 0.5 : 0; // Default wet to 0.5 if depth is added\n    }\n  }, [delayAmount, delayFeedback, reverbAmount, filterCutoff, filterResonance, distortionAmount, chorusDepth]);\n\n  // --- Play/Release Notes ---\n  const triggerAttack = useCallback((frequency, key) => {\n    if (synth.current && !activeNotes.current.has(key)) {\n      synth.current.triggerAttack(frequency);\n      activeNotes.current.set(key, frequency);\n      setActiveFreqs(prev => {\n        const s = new Set(prev);\n        s.add(frequency);\n        return s;\n      });\n    }\n  }, []);\n\n  const triggerRelease = useCallback((key) => {\n    if (synth.current && activeNotes.current.has(key)) {\n      const frequency = activeNotes.current.get(key);\n      synth.current.triggerRelease(frequency);\n      activeNotes.current.delete(key);\n      setActiveFreqs(prev => {\n        const s = new Set(prev);\n        s.delete(frequency);\n        return s;\n      });\n    }\n  }, []);\n\n  // --- Keyboard Event Listeners ---\n  useEffect(() => {\n    const baseOctaveKeysLocal = baseOctaveKeys;\n    const octaveDownKeysLocal = octaveDownKeys;\n    const octaveUpKeysLocal = octaveUpKeys;\n\n    const handleKeyDown = (e) => {\n      const key = e.key.toLowerCase();\n      // Only process keys if they are part of our synth mapping\n      if (![...baseOctaveKeysLocal, ...octaveDownKeysLocal, ...octaveUpKeysLocal].includes(key)) {\n        return;\n      }\n      e.preventDefault(); // Prevent default browser actions for synth keys\n\n      let baseKeyIndex = -1;\n      let octaveSlot = -1; // -1 for octave down keys, 0 for base keys, 1 for octave up keys (relative to fullMaqamScale generation)\n\n      if (baseOctaveKeysLocal.includes(key)) {\n        baseKeyIndex = baseOctaveKeysLocal.indexOf(key);\n        octaveSlot = 1; // Corresponds to the *second* octave generated in fullMaqamScale (index 1)\n      } else if (octaveDownKeysLocal.includes(key)) {\n        baseKeyIndex = octaveDownKeysLocal.indexOf(key);\n        octaveSlot = 0; // Corresponds to the *first* octave generated in fullMaqamScale (index 0)\n      } else if (octaveUpKeysLocal.includes(key)) {\n        baseKeyIndex = octaveUpKeysLocal.indexOf(key);\n        octaveSlot = 2; // Corresponds to the *third* octave generated in fullMaqamScale (index 2)\n      }\n\n      if (baseKeyIndex !== -1 && maqamNotes.length > 0) {\n        const absoluteNoteIndex = (octaveSlot * currentMaqamScaleLength) + baseKeyIndex;\n\n        if (absoluteNoteIndex >= 0 && absoluteNoteIndex < maqamNotes.length) {\n          triggerAttack(maqamNotes[absoluteNoteIndex], key);\n        } else {\n          console.warn(`Key \"${key}\" maps to an out-of-bounds note index: ${absoluteNoteIndex}. Maqam notes length: ${maqamNotes.length}. Current Maqam Scale Length: ${currentMaqamScaleLength}`);\n        }\n      }\n    };\n\n    const handleKeyUp = (e) => {\n      const key = e.key.toLowerCase();\n      // Only process keys if they are part of our synth mapping\n      if (![...baseOctaveKeys, ...octaveDownKeys, ...octaveUpKeys].includes(key)) {\n        return;\n      }\n      e.preventDefault(); // Prevent default browser actions\n      triggerRelease(key);\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n      activeNotes.current.clear();\n      setActiveFreqs(new Set());\n    };\n  }, [maqamNotes, currentMaqam, triggerAttack, triggerRelease, currentMaqamScaleLength, baseOctaveKeys, octaveDownKeys, octaveUpKeys]);\n\n  return (\n    <div className=\"maqam-synth-container\">\n      <h1>Turkish Maqam Synthesizer</h1>\n      <SynthControls\n        rootNoteOffset={rootNoteOffset}\n        setRootNoteOffset={setRootNoteOffset}\n        oscillatorType={oscillatorType}\n        setOscillatorType={setOscillatorType}\n        attack={attack} setAttack={setAttack}\n        decay={decay} setDecay={setDecay}\n        sustain={sustain} setSustain={setSustain}\n        release={release} setRelease={setRelease}\n        // Modulation props\n        modOscillatorType={modOscillatorType} setModOscillatorType={setModOscillatorType}\n        modAttack={modAttack} setModAttack={setModAttack}\n        modDecay={modDecay} setModDecay={setModDecay}\n        modSustain={modSustain} setModSustain={setModSustain}\n        modRelease={modRelease} setModRelease={setModRelease}\n        modulationIndex={modulationIndex} setModulationIndex={setModulationIndex}\n        harmonicity={harmonicity} setHarmonicity={setHarmonicity}\n        // Effects props\n        delayAmount={delayAmount} setDelayAmount={setDelayAmount}\n        delayFeedback={delayFeedback} setDelayFeedback={setDelayFeedback}\n        reverbAmount={reverbAmount} setReverbAmount={setReverbAmount}\n        filterCutoff={filterCutoff} setFilterCutoff={setFilterCutoff}\n        filterResonance={filterResonance} setFilterResonance={setFilterResonance}\n        distortionAmount={distortionAmount} setDistortionAmount={setDistortionAmount}\n        chorusDepth={chorusDepth} setChorusDepth={setChorusDepth}\n      />\n      <MaqamNoteDisplay \n        upMappings={upMappings}\n        baseMappings={baseMappings}\n        downMappings={downMappings}\n        activeFreqs={activeFreqs}\n        onNoteDown={triggerAttack}\n        onNoteUp={triggerRelease}\n        // Maqam Selection Props\n        currentMaqam={currentMaqam}\n        setCurrentMaqam={setCurrentMaqam}\n        tMaqamsIntervals={tMaqamsIntervals}\n      />\n    </div>\n  );\n};\n\nexport default MaqamSynth;\n","// src/App.js\nimport React from 'react';\nimport './App.css';\n\nimport MaqamSynth from './components/MaqamSynth'; // <--- Make sure this import is here\n\nfunction App() {\n  return (\n    <div>\n      <MaqamSynth /> {/* <--- Make sure this component is rendered here */}\n    </div>\n  );\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);"],"sourceRoot":""}