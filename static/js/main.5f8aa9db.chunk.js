(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(6),c=a.n(r),s=(a(16),a(17),a(2));var o=e=>{let{currentMaqam:t,setCurrentMaqam:a,tMaqamsIntervals:n,rootNoteOffset:r,setRootNoteOffset:c,oscillatorType:s,setOscillatorType:o,attack:u,setAttack:i,decay:m,setDecay:d,sustain:E,setSustain:b,release:v,setRelease:p,delayAmount:h,setDelayAmount:k,delayFeedback:y,setDelayFeedback:g,reverbAmount:f,setReverbAmount:w}=e;return l.a.createElement("div",{className:"synth-controls-container"},l.a.createElement("div",{className:"control-group"},l.a.createElement("label",{htmlFor:"maqam-select"},"Select Maqam:"),l.a.createElement("select",{id:"maqam-select",value:t,onChange:e=>a(e.target.value)},Object.keys(n).map(e=>l.a.createElement("option",{key:e,value:e},e)))),l.a.createElement("div",{className:"control-group"},l.a.createElement("label",{htmlFor:"root-offset-slider"},"Root Octave Offset:"),l.a.createElement("input",{id:"root-offset-slider",type:"range",min:"-2",max:"2",step:"1",value:r,onChange:e=>c(parseInt(e.target.value))}),l.a.createElement("span",null,r)),l.a.createElement("div",{className:"control-group"},l.a.createElement("label",null,"Oscillator Type:"),l.a.createElement("div",{className:"radio-group"},l.a.createElement("input",{type:"radio",id:"sine",name:"oscType",value:"sine",checked:"sine"===s,onChange:e=>o(e.target.value)}),l.a.createElement("label",{htmlFor:"sine"},"Sine"),l.a.createElement("input",{type:"radio",id:"sawtooth",name:"oscType",value:"sawtooth",checked:"sawtooth"===s,onChange:e=>o(e.target.value)}),l.a.createElement("label",{htmlFor:"sawtooth"},"Sawtooth"),l.a.createElement("input",{type:"radio",id:"triangle",name:"oscType",value:"triangle",checked:"triangle"===s,onChange:e=>o(e.target.value)}),l.a.createElement("label",{htmlFor:"triangle"},"Triangle"),l.a.createElement("input",{type:"radio",id:"square",name:"oscType",value:"square",checked:"square"===s,onChange:e=>o(e.target.value)}),l.a.createElement("label",{htmlFor:"square"},"Square"))),l.a.createElement("div",{className:"control-group adsr-controls"},l.a.createElement("h3",null,"Envelope (ADSR)"),l.a.createElement("div",{className:"control-item"},l.a.createElement("label",{htmlFor:"attack-slider"},"Attack:"),l.a.createElement("input",{type:"range",id:"attack-slider",min:"0.001",max:"2",step:"0.001",value:u,onChange:e=>i(parseFloat(e.target.value))}),l.a.createElement("span",null,u.toFixed(3),"s")),l.a.createElement("div",{className:"control-item"},l.a.createElement("label",{htmlFor:"decay-slider"},"Decay:"),l.a.createElement("input",{type:"range",id:"decay-slider",min:"0.01",max:"2",step:"0.01",value:m,onChange:e=>d(parseFloat(e.target.value))}),l.a.createElement("span",null,m.toFixed(2),"s")),l.a.createElement("div",{className:"control-item"},l.a.createElement("label",{htmlFor:"sustain-slider"},"Sustain:"),l.a.createElement("input",{type:"range",id:"sustain-slider",min:"0",max:"1",step:"0.01",value:E,onChange:e=>b(parseFloat(e.target.value))}),l.a.createElement("span",null,E.toFixed(2))),l.a.createElement("div",{className:"control-item"},l.a.createElement("label",{htmlFor:"release-slider"},"Release:"),l.a.createElement("input",{type:"range",id:"release-slider",min:"0.01",max:"3",step:"0.01",value:v,onChange:e=>p(parseFloat(e.target.value))}),l.a.createElement("span",null,v.toFixed(2),"s"))),l.a.createElement("div",{className:"control-group"},l.a.createElement("label",{htmlFor:"delay-slider"},"Delay (Wet Mix):"),l.a.createElement("input",{id:"delay-slider",type:"range",min:"0",max:"1",step:"0.01",value:h,onChange:e=>k(parseFloat(e.target.value))}),l.a.createElement("span",null,h.toFixed(2))),l.a.createElement("div",{className:"control-group"},l.a.createElement("label",{htmlFor:"delay-feedback-slider"},"Delay Feedback:"),l.a.createElement("input",{id:"delay-feedback-slider",type:"range",min:"0",max:"0.95",step:"0.01",value:y,onChange:e=>g(parseFloat(e.target.value))}),l.a.createElement("span",null,y.toFixed(2))),l.a.createElement("div",{className:"control-group"},l.a.createElement("label",{htmlFor:"reverb-slider"},"Reverb (Wet Mix):"),l.a.createElement("input",{id:"reverb-slider",type:"range",min:"0",max:"1",step:"0.01",value:f,onChange:e=>w(parseFloat(e.target.value))}),l.a.createElement("span",null,f.toFixed(2))))};var u=()=>l.a.createElement("div",{className:"keyboard-info"},l.a.createElement("p",null,"Base Octave: ",l.a.createElement("kbd",null,"a"),l.a.createElement("kbd",null,"s"),l.a.createElement("kbd",null,"d"),l.a.createElement("kbd",null,"f"),l.a.createElement("kbd",null,"g"),l.a.createElement("kbd",null,"h"),l.a.createElement("kbd",null,"j"),l.a.createElement("kbd",null,"k"),l.a.createElement("kbd",null,"l"),l.a.createElement("kbd",null,"\u015f")),l.a.createElement("p",null,"Octave Down: ",l.a.createElement("kbd",null,"z"),l.a.createElement("kbd",null,"x"),l.a.createElement("kbd",null,"c"),l.a.createElement("kbd",null,"v"),l.a.createElement("kbd",null,"b"),l.a.createElement("kbd",null,"n"),l.a.createElement("kbd",null,"m"),l.a.createElement("kbd",null,"\xf6"),l.a.createElement("kbd",null,"\xe7")),l.a.createElement("p",null,"Octave Up: ",l.a.createElement("kbd",null,"q"),l.a.createElement("kbd",null,"w"),l.a.createElement("kbd",null,"e"),l.a.createElement("kbd",null,"r"),l.a.createElement("kbd",null,"t"),l.a.createElement("kbd",null,"y"),l.a.createElement("kbd",null,"u"),l.a.createElement("kbd",null,"\u0131"),l.a.createElement("kbd",null,"o")));var i=e=>{let{maqamNotes:t,frequencyToNoteName:a,activeNotes:n=new Map}=e;return l.a.createElement("div",{className:"note-display-section"},l.a.createElement("h2",null,"Maqam Notes:"),l.a.createElement("div",{className:"note-grid"},t.map((e,t)=>{const r=Array.from(n.values()).some(t=>Math.abs(t-e)<.01);return l.a.createElement("span",{key:t,className:"note-button ".concat(r?"active":"")},a(e))})))};a(28);const m={Rast:[9,8,5,9,9,4,4,5],Nahawand:[9,4,9,9,4,9,9],HicazUzzalHumayun:[5,12,5,9,4,4,5,9],Hicazkar:[5,12,5,9,5,3,5,4,5],Yegah:[9,8,5,9,8,4,4,5],SultaniyegahRuhnevaz:[9,4,9,9,4,9,4,5],FerahnumaAskefza:[4,9,9,9,4,9,9],Sedaraban:[5,12,5,9,5,8,4,5],Huseyniasiran:[8,5,9,8,5,9,9],Suzidil:[5,1,5,4,4,5,4,5],Acemasiran:[9,9,4,4,5,9,9,4],Sevkefza:[9,5,4,4,4,5,5,13,4],Iraq:[5,9,8,5,9,9,4,4],EvicSegah:[5,9,8,5,4,5,9,4,4],Ferahnak:[5,9,8,1,4,4,5,9,4,4],Evicara:[5,13,4,9,5,13,4],Mahur:[9,9,4,9,9,4,5,4],Suzidilara:[9,5,4,4,4,5,9,4,5,4],Buzurk:[9,9,4,4,5,9,4,4,5],Suzinak:[5,4,4,4,5,9,4,9,9],ZirguleliSuzinak:[5,12,5,5,4,4,4,5,9],Kurdilihicazkar:[4,1,4,4,4,5,9,4,4,5],Nihavend:[9,4,9,5,4,4,5,8,5],Neveser:[9,5,12,5,5,12,5],Nikriz:[9,5,12,5,9,4,4,5],HuseyniMuhayyer:[8,5,9,9,4,4,5,9],GulizarBeyati:[8,5,9,5,4,4,4,5,9],UssakAcem:[8,5,9,9,4,9,9],Kurdi:[4,4,1,4,9,4,5,4,9,9],Buselik:[9,4,9,5,4,4,4,5,4,5],Arazbar:[8,5,9,5,3,1,4,4,5,9],Zirgule:[5,12,5,9,4,1,8,4,5],Sehnaz:[5,12,5,9,4,1,3,5,4,5],SabaSunbule:[8,5,5,13,4,9,9],Kucek:[8,5,5,13,4,4,5,5,4],EskiSipihr:[8,5,5,1,3,9,4,4,5,4,5],Dugah:[4,4,5,4,1,13,4,9,9],Hisar:[8,5,9,4,5,4,1,8,4,5],YeniSipihr:[5,3,5,4,5,4,5,4,1,3,5,4,5],Nisaburek:[9,8,5,9,5,8,9],Huzzam:[5,9,5,12,5,9,4,4],Mustear:[9,5,8,9,5,9,4,4],MayeYeniMaye:[5,9,8,1,4,9,9,8],VechiArazbar:[1,4,9,8,5,9,9,3,5],Nisabur:[8,5,9,4,9,9,4,5],CargahI:[5,13,4,9,5,12,5],CargahII:[9,9,4,9,9,9,4],Araban:[5,8,13,5,5,8,4,5],Urmawi:[9,8,5,9,9,5,8]},d=e=>{const t=12*Math.log2(e/440)+69,a=Math.round(t),n=Math.round(100*(t-a));let l=["Do","Do\u266f","Re","Re\u266f","Mi","Fa","Fa\u266f","Sol","Sol\u266f","La","La\u266f","Si"][a%12];const r=Math.floor(a/12)-1;return Math.abs(n)>10&&Math.abs(n)<90&&(l+=n>0?"\u2191":"\u2193"),"".concat(l).concat(r)};var E=()=>{const e=Object(n.useRef)(null),t=Object(n.useRef)(null),a=Object(n.useRef)(null),r=Object(n.useRef)(null),c=Object(n.useRef)(null),[E,b]=Object(n.useState)("sine"),[v,p]=Object(n.useState)(.01),[h,k]=Object(n.useState)(.2),[y,g]=Object(n.useState)(.5),[f,w]=Object(n.useState)(1),[O,F]=Object(n.useState)(0),[N,S]=Object(n.useState)(.5),[M,j]=Object(n.useState)(0),[q,x]=Object(n.useState)("Rast"),[R,z]=Object(n.useState)([]),[C,A]=Object(n.useState)(0),D=Object(n.useRef)(new Map),L=Object(n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:110;const a=m[e];if(!a)return console.warn('Maqam "'.concat(e,'" not found in intervals dictionary.')),[];const n=[t];let l=t;for(let c=0;c<a.length;c++)l*=Math.pow(2,a[c]/53),n.push(l);const r=[];for(let c=-1;c<=2;c++)n.forEach(e=>{r.push(e*Math.pow(2,c))});return r.sort((e,t)=>e-t),r},[]);Object(n.useEffect)(()=>{if(!e.current){t.current=new s.c(.5),a.current=new s.b("8n",N).set({wet:0}),r.current=new s.f({decay:1.5,wet:.05}).set({wet:0}),c.current=new s.d(-6),e.current=new s.e(s.g,{oscillator:{type:E},envelope:{attack:v,decay:h,sustain:y,release:f}}).chain(a.current,r.current,c.current,t.current,s.a);const n=()=>{"running"!==s.h.state&&(s.i(),console.log("Audio context started.")),document.removeEventListener("keydown",n),document.removeEventListener("click",n)};document.addEventListener("keydown",n),document.addEventListener("click",n)}},[]),Object(n.useEffect)(()=>{const e=110*Math.pow(2,C),t=L(q,e);z(t),console.log("Maqam: ".concat(q,", Root Freq: ").concat(e,", Notes:"),t.map(e=>e.toFixed(2)))},[q,C,L]),Object(n.useEffect)(()=>{e.current&&e.current.set({oscillator:{type:E},envelope:{attack:v,decay:h,sustain:y,release:f}})},[E,v,h,y,f]),Object(n.useEffect)(()=>{a.current&&(a.current.wet.value=O,a.current.feedback.value=N)},[O,N]),Object(n.useEffect)(()=>{r.current&&(r.current.wet.value=M)},[M]);const T=Object(n.useCallback)((t,a)=>{e.current&&!D.current.has(a)&&(e.current.triggerAttack(t),D.current.set(a,t))},[]),I=Object(n.useCallback)(t=>{if(e.current&&D.current.has(t)){const a=D.current.get(t);e.current.triggerRelease(a),D.current.delete(t)}},[]);return Object(n.useEffect)(()=>{const e=["a","s","d","f","g","h","j","k","l","\u015f"],t=["z","x","c","v","b","n","m","\xf6","\xe7"],a=["q","w","e","r","t","y","u","\u0131","o"],n=n=>{var l;const r=n.key.toLowerCase();if(![...e,...t,...a].includes(r))return;n.preventDefault();const c=(null===(l=m[q])||void 0===l?void 0:l.length)+1;let s=-1,o=-1;if(e.includes(r)?(s=e.indexOf(r),o=1):t.includes(r)?(s=t.indexOf(r),o=0):a.includes(r)&&(s=a.indexOf(r),o=2),-1!==s&&R.length>0){const e=o*c+s;e>=0&&e<R.length?T(R[e],r):console.warn('Key "'.concat(r,'" maps to an out-of-bounds note index: ').concat(e,". Maqam notes length: ").concat(R.length,". Current Maqam Scale Length: ").concat(c))}},l=n=>{const l=n.key.toLowerCase();[...e,...t,...a].includes(l)&&(n.preventDefault(),I(l))};return window.addEventListener("keydown",n),window.addEventListener("keyup",l),()=>{window.removeEventListener("keydown",n),window.removeEventListener("keyup",l),D.current.clear()}},[R,q,T,I]),l.a.createElement("div",{className:"maqam-synth-container"},l.a.createElement("h1",null,"Turkish Maqam Synthesizer"),l.a.createElement(o,{currentMaqam:q,setCurrentMaqam:x,tMaqamsIntervals:m,rootNoteOffset:C,setRootNoteOffset:A,oscillatorType:E,setOscillatorType:b,attack:v,setAttack:p,decay:h,setDecay:k,sustain:y,setSustain:g,release:f,setRelease:w,delayAmount:O,setDelayAmount:F,delayFeedback:N,setDelayFeedback:S,reverbAmount:M,setReverbAmount:j}),l.a.createElement(i,{maqamNotes:R,frequencyToNoteName:d,activeNotes:D.current}),l.a.createElement(u,null))};var b=function(){return l.a.createElement("div",null,l.a.createElement(E,null)," ")};c.a.createRoot(document.getElementById("root")).render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(b,null)))},7:function(e,t,a){e.exports=a(29)}},[[7,1,2]]]);
//# sourceMappingURL=main.5f8aa9db.chunk.js.map