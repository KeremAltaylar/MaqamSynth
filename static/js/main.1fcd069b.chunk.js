(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){},17:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(6),c=a.n(l),s=(a(16),a(17),a(2));var o=e=>{let{currentMaqam:t,setCurrentMaqam:a,tMaqamsIntervals:n,rootNoteOffset:l,setRootNoteOffset:c,oscillatorType:s,setOscillatorType:o,attack:u,setAttack:i,decay:m,setDecay:d,sustain:p,setSustain:v,release:h,setRelease:E,delayAmount:y,setDelayAmount:b,delayFeedback:g,setDelayFeedback:f,reverbAmount:k,setReverbAmount:w}=e;return r.a.createElement("div",{className:"synth-controls-container"},r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"maqam-select"},"Select Maqam:"),r.a.createElement("select",{id:"maqam-select",value:t,onChange:e=>a(e.target.value)},Object.keys(n).map(e=>r.a.createElement("option",{key:e,value:e},e)))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"root-offset-slider"},"Root Octave Offset:"),r.a.createElement("input",{id:"root-offset-slider",type:"range",min:"-2",max:"2",step:"1",value:l,onChange:e=>c(parseInt(e.target.value))}),r.a.createElement("span",null,l)),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",null,"Oscillator Type:"),r.a.createElement("div",{className:"radio-group"},r.a.createElement("input",{type:"radio",id:"sine",name:"oscType",value:"sine",checked:"sine"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"sine"},"Sine"),r.a.createElement("input",{type:"radio",id:"sawtooth",name:"oscType",value:"sawtooth",checked:"sawtooth"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"sawtooth"},"Sawtooth"),r.a.createElement("input",{type:"radio",id:"triangle",name:"oscType",value:"triangle",checked:"triangle"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"triangle"},"Triangle"),r.a.createElement("input",{type:"radio",id:"square",name:"oscType",value:"square",checked:"square"===s,onChange:e=>o(e.target.value)}),r.a.createElement("label",{htmlFor:"square"},"Square"))),r.a.createElement("div",{className:"control-group adsr-controls"},r.a.createElement("h3",null,"Envelope (ADSR)"),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"attack-slider"},"Attack:"),r.a.createElement("input",{type:"range",id:"attack-slider",min:"0.001",max:"2",step:"0.001",value:u,onChange:e=>i(parseFloat(e.target.value))}),r.a.createElement("span",null,u.toFixed(3),"s")),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"decay-slider"},"Decay:"),r.a.createElement("input",{type:"range",id:"decay-slider",min:"0.01",max:"2",step:"0.01",value:m,onChange:e=>d(parseFloat(e.target.value))}),r.a.createElement("span",null,m.toFixed(2),"s")),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"sustain-slider"},"Sustain:"),r.a.createElement("input",{type:"range",id:"sustain-slider",min:"0",max:"1",step:"0.01",value:p,onChange:e=>v(parseFloat(e.target.value))}),r.a.createElement("span",null,p.toFixed(2))),r.a.createElement("div",{className:"control-item"},r.a.createElement("label",{htmlFor:"release-slider"},"Release:"),r.a.createElement("input",{type:"range",id:"release-slider",min:"0.01",max:"3",step:"0.01",value:h,onChange:e=>E(parseFloat(e.target.value))}),r.a.createElement("span",null,h.toFixed(2),"s"))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"delay-slider"},"Delay (Wet Mix):"),r.a.createElement("input",{id:"delay-slider",type:"range",min:"0",max:"1",step:"0.01",value:y,onChange:e=>b(parseFloat(e.target.value))}),r.a.createElement("span",null,y.toFixed(2))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"delay-feedback-slider"},"Delay Feedback:"),r.a.createElement("input",{id:"delay-feedback-slider",type:"range",min:"0",max:"0.95",step:"0.01",value:g,onChange:e=>f(parseFloat(e.target.value))}),r.a.createElement("span",null,g.toFixed(2))),r.a.createElement("div",{className:"control-group"},r.a.createElement("label",{htmlFor:"reverb-slider"},"Reverb (Wet Mix):"),r.a.createElement("input",{id:"reverb-slider",type:"range",min:"0",max:"1",step:"0.01",value:k,onChange:e=>w(parseFloat(e.target.value))}),r.a.createElement("span",null,k.toFixed(2))))};var u=e=>{let{baseKeys:t=[],downKeys:a=[],upKeys:n=[]}=e;return r.a.createElement("div",{className:"keyboard-info"},r.a.createElement("p",null,"Base Octave: ",t.map(e=>r.a.createElement("kbd",{key:"b-".concat(e)},e))),r.a.createElement("p",null,"Octave Down: ",a.map(e=>r.a.createElement("kbd",{key:"d-".concat(e)},e))),r.a.createElement("p",null,"Octave Up: ",n.map(e=>r.a.createElement("kbd",{key:"u-".concat(e)},e))))};var i=e=>{let{maqamNotes:t,frequencyToNoteName:a,activeNotes:n=new Map}=e;return r.a.createElement("div",{className:"note-display-section"},r.a.createElement("h2",null,"Maqam Notes:"),r.a.createElement("div",{className:"note-grid"},t.map((e,t)=>{const l=Array.from(n.values()).some(t=>Math.abs(t-e)<.01);return r.a.createElement("span",{key:t,className:"note-button ".concat(l?"active":"")},a(e))})))};a(28);const m={Rast:[9,8,5,9,9,4,4,5],Nahawand:[9,4,9,9,4,9,9],HicazUzzalHumayun:[5,12,5,9,4,4,5,9],Hicazkar:[5,12,5,9,5,3,5,4,5],Yegah:[9,8,5,9,8,4,4,5],SultaniyegahRuhnevaz:[9,4,9,9,4,9,4,5],FerahnumaAskefza:[4,9,9,9,4,9,9],Sedaraban:[5,12,5,9,5,8,4,5],Huseyniasiran:[8,5,9,8,5,9,9],Suzidil:[5,1,5,4,4,5,4,5],Acemasiran:[9,9,4,4,5,9,9,4],Sevkefza:[9,5,4,4,4,5,5,13,4],Iraq:[5,9,8,5,9,9,4,4],EvicSegah:[5,9,8,5,4,5,9,4,4],Ferahnak:[5,9,8,1,4,4,5,9,4,4],Evicara:[5,13,4,9,5,13,4],Mahur:[9,9,4,9,9,4,5,4],Suzidilara:[9,5,4,4,4,5,9,4,5,4],Buzurk:[9,9,4,4,5,9,4,4,5],Suzinak:[5,4,4,4,5,9,4,9,9],ZirguleliSuzinak:[5,12,5,5,4,4,4,5,9],Kurdilihicazkar:[4,1,4,4,4,5,9,4,4,5],Nihavend:[9,4,9,5,4,4,5,8,5],Neveser:[9,5,12,5,5,12,5],Nikriz:[9,5,12,5,9,4,4,5],HuseyniMuhayyer:[8,5,9,9,4,4,5,9],GulizarBeyati:[8,5,9,5,4,4,4,5,9],UssakAcem:[8,5,9,9,4,9,9],Kurdi:[4,4,1,4,9,4,5,4,9,9],Buselik:[9,4,9,5,4,4,4,5,4,5],Arazbar:[8,5,9,5,3,1,4,4,5,9],Zirgule:[5,12,5,9,4,1,8,4,5],Sehnaz:[5,12,5,9,4,1,3,5,4,5],SabaSunbule:[8,5,5,13,4,9,9],Kucek:[8,5,5,13,4,4,5,5,4],EskiSipihr:[8,5,5,1,3,9,4,4,5,4,5],Dugah:[4,4,5,4,1,13,4,9,9],Hisar:[8,5,9,4,5,4,1,8,4,5],YeniSipihr:[5,3,5,4,5,4,5,4,1,3,5,4,5],Nisaburek:[9,8,5,9,5,8,9],Huzzam:[5,9,5,12,5,9,4,4],Mustear:[9,5,8,9,5,9,4,4],MayeYeniMaye:[5,9,8,1,4,9,9,8],VechiArazbar:[1,4,9,8,5,9,9,3,5],Nisabur:[8,5,9,4,9,9,4,5],CargahI:[5,13,4,9,5,12,5],CargahII:[9,9,4,9,9,9,4],Araban:[5,8,13,5,5,8,4,5],Urmawi:[9,8,5,9,9,5,8]},d=e=>{const t=12*Math.log2(e/440)+69,a=Math.round(t),n=Math.round(100*(t-a));let r=["Do","Do\u266f","Re","Re\u266f","Mi","Fa","Fa\u266f","Sol","Sol\u266f","La","La\u266f","Si"][a%12];const l=Math.floor(a/12)-1;return Math.abs(n)>10&&Math.abs(n)<90&&(r+=n>0?"\u2191":"\u2193"),"".concat(r).concat(l)};var p=()=>{var e;const t=Object(n.useRef)(null),a=Object(n.useRef)(null),l=Object(n.useRef)(null),c=Object(n.useRef)(null),p=Object(n.useRef)(null),[v,h]=Object(n.useState)("sine"),[E,y]=Object(n.useState)(.01),[b,g]=Object(n.useState)(.2),[f,k]=Object(n.useState)(.5),[w,O]=Object(n.useState)(1),[M,F]=Object(n.useState)(0),[N,S]=Object(n.useState)(.5),[j,q]=Object(n.useState)(0),[x,R]=Object(n.useState)("Rast"),[z,C]=Object(n.useState)([]),[A,D]=Object(n.useState)(0),L=((null===(e=m[x])||void 0===e?void 0:e.length)||0)+1,T=Object(n.useRef)(new Map),K=Object(n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:110;const a=m[e];if(!a)return console.warn('Maqam "'.concat(e,'" not found in intervals dictionary.')),[];const n=[t];let r=t;for(let c=0;c<a.length;c++)r*=Math.pow(2,a[c]/53),n.push(r);const l=[];for(let c=-1;c<=2;c++)n.forEach(e=>{l.push(e*Math.pow(2,c))});return l.sort((e,t)=>e-t),l},[]);Object(n.useEffect)(()=>{if(!t.current){a.current=new s.c(.5),l.current=new s.b("8n",N).set({wet:0}),c.current=new s.f({decay:1.5,wet:.05}).set({wet:0}),p.current=new s.d(-6),t.current=new s.e(s.g,{oscillator:{type:v},envelope:{attack:E,decay:b,sustain:f,release:w}}).chain(l.current,c.current,p.current,a.current,s.a);const e=()=>{"running"!==s.h.state&&(s.i(),console.log("Audio context started.")),document.removeEventListener("keydown",e),document.removeEventListener("click",e)};document.addEventListener("keydown",e),document.addEventListener("click",e)}},[]),Object(n.useEffect)(()=>{const e=110*Math.pow(2,A),t=K(x,e);C(t),console.log("Maqam: ".concat(x,", Root Freq: ").concat(e,", Notes:"),t.map(e=>e.toFixed(2)))},[x,A,K]),Object(n.useEffect)(()=>{t.current&&t.current.set({oscillator:{type:v},envelope:{attack:E,decay:b,sustain:f,release:w}})},[v,E,b,f,w]),Object(n.useEffect)(()=>{l.current&&(l.current.wet.value=M,l.current.feedback.value=N)},[M,N]),Object(n.useEffect)(()=>{c.current&&(c.current.wet.value=j)},[j]);const I=Object(n.useCallback)((e,a)=>{t.current&&!T.current.has(a)&&(t.current.triggerAttack(e),T.current.set(a,e))},[]),H=Object(n.useCallback)(e=>{if(t.current&&T.current.has(e)){const a=T.current.get(e);t.current.triggerRelease(a),T.current.delete(e)}},[]);return Object(n.useEffect)(()=>{const e=["q","w","e","r","t","y","u","\u0131","o","p","\u011f","\xfc"],t=["z","x","c","v","b","n","m","\xf6","\xe7","."],a=["a","s","d","f","g","h","j","k","l","\u015f","i",","].slice(0,L),n=t.slice(0,Math.min(L,t.length)),r=e.slice(0,Math.min(L,e.length)),l=e=>{const t=e.key.toLowerCase();if(![...a,...n,...r].includes(t))return;e.preventDefault();let l=-1,c=-1;if(a.includes(t)?(l=a.indexOf(t),c=1):n.includes(t)?(l=n.indexOf(t),c=0):r.includes(t)&&(l=r.indexOf(t),c=2),-1!==l&&z.length>0){const e=c*L+l;e>=0&&e<z.length?I(z[e],t):console.warn('Key "'.concat(t,'" maps to an out-of-bounds note index: ').concat(e,". Maqam notes length: ").concat(z.length,". Current Maqam Scale Length: ").concat(L))}},c=e=>{const t=e.key.toLowerCase();[...a,...n,...r].includes(t)&&(e.preventDefault(),H(t))};return window.addEventListener("keydown",l),window.addEventListener("keyup",c),()=>{window.removeEventListener("keydown",l),window.removeEventListener("keyup",c),T.current.clear()}},[z,x,I,H,L]),r.a.createElement("div",{className:"maqam-synth-container"},r.a.createElement("h1",null,"Turkish Maqam Synthesizer"),r.a.createElement(o,{currentMaqam:x,setCurrentMaqam:R,tMaqamsIntervals:m,rootNoteOffset:A,setRootNoteOffset:D,oscillatorType:v,setOscillatorType:h,attack:E,setAttack:y,decay:b,setDecay:g,sustain:f,setSustain:k,release:w,setRelease:O,delayAmount:M,setDelayAmount:F,delayFeedback:N,setDelayFeedback:S,reverbAmount:j,setReverbAmount:q}),r.a.createElement(i,{maqamNotes:z,frequencyToNoteName:d,activeNotes:T.current}),r.a.createElement(u,{upKeys:["q","w","e","r","t","y","u","\u0131","o","p","\u011f","\xfc"].slice(0,Math.min(L,12)),baseKeys:["a","s","d","f","g","h","j","k","l","\u015f","i",","].slice(0,Math.min(L,12)),downKeys:["z","x","c","v","b","n","m","\xf6","\xe7","."].slice(0,Math.min(L,10))}))};var v=function(){return r.a.createElement("div",null,r.a.createElement(p,null)," ")};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)))},7:function(e,t,a){e.exports=a(29)}},[[7,1,2]]]);
//# sourceMappingURL=main.1fcd069b.chunk.js.map